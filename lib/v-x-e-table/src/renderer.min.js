"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Renderer=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function defaultRenderer(e,t,o,r){var l=r.$table,n=r.row,a=r.column,u=o.name;return[e("div",{class:"vxe-input--wrapper"},[e(u,{class:"vxe-".concat(u),attrs:t,domProps:{value:_tools.UtilTools.getCellValue(n,a)},on:{input:function(e){_tools.UtilTools.setCellValue(n,a,e.target.value),l.updateStatus(r)}}})])]}var rowHeight=24,_storeMap={input:{autofocus:".vxe-input",renderEdit:function(e,t,o){return defaultRenderer(e,{type:"text"},t,o)}},textarea:{autofocus:".vxe-textarea",renderEdit:function(e,t,o){return defaultRenderer(e,null,t,o)}},cell:{autofocus:".vxe-textarea",renderEdit:function(e,t,o,r){var l=r.$excel.excelStore.uploadRows,n=o.row,a=o.column;return[e("div",{class:"vxe-input--wrapper vxe-excel-cell",style:{height:"".concat(a.renderHeight-1,"px")}},[e("textarea",{class:"vxe-textarea",style:{width:"".concat(a.renderWidth,"px")},domProps:{value:_tools.UtilTools.getCellValue(n,a)},on:{input:function(e){var t=e.target;_tools.UtilTools.setCellValue(n,a,e.target.value),t.scrollHeight>t.offsetHeight&&(-1===l.indexOf(n)?t.style.width="".concat(t.offsetWidth+20,"px"):t.style.height="".concat(t.scrollHeight,"px"))},change:function(){-1===l.indexOf(n)&&l.push(n)},keydown:function(e){var t=e.target;if(e.altKey&&13===e.keyCode){e.preventDefault(),e.stopPropagation();var o=t.value,r=_tools.DomTools.getCursorPosition(t),l=r.end;_tools.UtilTools.setCellValue(n,a,"".concat(o.slice(0,l),"\n").concat(o.slice(l,o.length))),t.style.height="".concat((Math.floor(t.offsetHeight/rowHeight)+1)*rowHeight,"px"),setTimeout(function(){r.start=r.end=++l,_tools.DomTools.setCursorPosition(t,r)})}}}})])]},renderCell:function(e,t,o){var r=o.row,l=o.column;return[e("span",{domProps:{innerHTML:_xeUtils.default.escape(_tools.UtilTools.getCellValue(r,l)).replace(/\n/g,"<br>")}})]}}},Renderer={mixin:function(e){return Object.assign(_storeMap,e),Renderer},get:function(e){return _storeMap[e]||null},add:function(e,t){return e&&t&&(_storeMap[e]=t),Renderer},delete:function(e){return delete _storeMap[e],Renderer}},_default=exports.Renderer=Renderer;exports.default=_default;