"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Renderer=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function getAttrs(e){var t=e.name,r=e.attrs;return"input"===t&&(r=Object.assign({type:"text"},r)),r}function defaultCellRender(e,t,r){var n=r.column,o=t.name,u=n.model,l=getAttrs(t);return[e(o,{class:"vxe-default-".concat(o),attrs:l,domProps:{value:u.value},on:getEvents(t,r)})]}function getEvents(e,r){var t=e.name,n=e.events,o=r.$table,u=r.column.model,l=_defineProperty({},"select"===t?"change":"input",function(e){var t=e.target.value;u.update=!0,u.value=t,o.updateStatus(r,t)});return n&&_xeUtils.default.assign(l,_xeUtils.default.objectMap(n,function(e){return function(){e.apply(null,[r].concat.apply(r,arguments))}})),l}function renderOptgroups(r,n,o){var e=n.optionGroups,t=n.optionGroupProps,u=void 0===t?{}:t,l=u.options||"options",a=u.label||"label";return e.map(function(e,t){return r("optgroup",{domProps:{label:e[a]},key:t},renderOptions(r,e[l],n,o))})}function renderOptions(r,e,t,n){var o=t.optionProps,u=void 0===o?{}:o,l=n.column,a=u.label||"label",i=u.value||"value";return e.map(function(e,t){return r("option",{domProps:{value:e[i],selected:e.value===l.model.value},key:t},e[a])})}function getFilterEvents(t,e,r,n){var o=r.column,u=e.events,l=_defineProperty({},"select"===name?"change":"input",function(e){t.data=e.target.value,handleConfirmFilter(n,o,!!t.data,t)});return u&&_xeUtils.default.assign(l,_xeUtils.default.objectMap(u,function(e){return function(){e.apply(null,[r].concat.apply(r,arguments))}})),l}function defaultFilterRender(t,r,n,o){var e=n.column,u=r.name,l=getAttrs(r);return e.filters.map(function(e){return t(u,{class:"vxe-default-".concat(u),attrs:l,domProps:{value:e.data},on:getFilterEvents(e,r,n,o)})})}function handleConfirmFilter(e,t,r,n){e[t.filterMultiple?"changeMultipleOption":"changeRadioOption"]({},r,n)}function defaultFilterMethod(e){var t=e.option,r=e.row,n=e.column,o=t.data;return _xeUtils.default.get(r,n.property)==o}var renderMap={input:{autofocus:"input",renderEdit:defaultCellRender,renderFilter:defaultFilterRender,filterMethod:defaultFilterMethod},textarea:{autofocus:"textarea",renderEdit:defaultCellRender,renderFilter:defaultFilterRender,filterMethod:defaultFilterMethod},select:{renderEdit:function(e,t,r){return[e("select",{class:"vxe-default-select",on:getEvents(t,r)},t.optionGroups?renderOptgroups(e,t,r):renderOptions(e,t.options,t,r))]},renderCell:function(e,t,r){var u=t.options,l=t.optionGroups,n=t.optionProps,a=void 0===n?{}:n,o=t.optionGroupProps,i=void 0===o?{}:o,d=r.row,p=r.column,f=_xeUtils.default.get(d,p.property);if(null!=f&&""!==f){var s=function(){var e,t=a.label||"label",r=a.value||"value";if(l){for(var n=i.options||"options",o=0;o<l.length&&!(e=l[o][n].find(function(e){return e[r]===f}));o++);return{v:e?e[t]:null}}return{v:(e=u.find(function(e){return e[r]===f}))?e[t]:null}}();if("object"===_typeof(s))return s.v}return""},renderFilter:function(t,r,n,o){var e=n.column,u=r.attrs;return e.filters.map(function(e){return t("select",{class:"vxe-default-select",attrs:u,on:getFilterEvents(e,r,n,o)},r.optionGroups?renderOptgroups(t,r,n):renderOptions(t,r.options,r,n))})},filterMethod:defaultFilterMethod}},Renderer={mixin:function(e){return _xeUtils.default.each(e,function(e,t){return Renderer.add(t,e)}),Renderer},get:function(e){return renderMap[e]||null},add:function(e,t){if(e&&t){var r=renderMap[e];r?Object.assign(r,t):renderMap[e]=t}return Renderer},delete:function(e){return delete renderMap[e],Renderer}},_default=exports.Renderer=Renderer;exports.default=_default;