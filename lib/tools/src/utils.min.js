"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.UtilTools=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../conf"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}var columnUniqueId=0,ColumnConfig=function e(l){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.renderHeader,n=t.renderCell,i=t.renderData;_classCallCheck(this,e),Object.assign(this,{id:"col_".concat(++columnUniqueId),type:l.type,prop:l.prop,property:l.field||l.prop,title:l.title,label:l.label,width:l.width,minWidth:l.minWidth,resizable:l.resizable,fixed:l.fixed,align:l.align,headerAlign:l.headerAlign,showOverflow:l.showOverflow,showHeaderOverflow:l.showHeaderOverflow,indexMethod:l.indexMethod,formatter:l.formatter,sortable:l.sortable,sortBy:l.sortBy,remoteSort:l.remoteSort,filters:(l.filters||[]).map(function(e){var l=e.label,t=e.value,r=e.data;return{label:l,value:t,data:r,_data:r,checked:!1}}),filterMultiple:!_xeUtils.default.isBoolean(l.filterMultiple)||l.filterMultiple,filterMethod:l.filterMethod,filterRender:l.filterRender,treeNode:l.treeNode,columnKey:l.columnKey,editRender:l.editRender,params:l.params,visible:!0,level:1,rowSpan:1,colSpan:1,order:null,renderWidth:0,renderHeight:0,resizeWidth:0,renderLeft:0,renderHeader:r||l.renderHeader,renderCell:n||l.renderCell,renderData:i,slots:l.slots,own:l})},UtilTools={getSize:function(e){var l=e.size,t=e.$parent;return l||(t&&-1<["medium","small","mini"].indexOf(t.size)?t.size:null)},getRowkey:function(e){var l=e.rowKey,t=e.rowId,r=e.selectConfig,n=void 0===r?{}:r,i=e.treeConfig,o=void 0===i?{}:i,a=e.expandConfig,u=void 0===a?{}:a,d=e.editConfig,s=void 0===d?{}:d;return l&&_xeUtils.default.isString(l)||(l=t||n.key||o.key||u.key||s.key||_conf.default.rowId),l},getRowid:function(e,l,t){var r=UtilTools.getRowkey(e);return"".concat(r?encodeURIComponent(_xeUtils.default.get(l,r)||""):t)},emitEvent:function(e,l,t){e.$listeners[l]&&e.$emit.apply(e,[l].concat(t))},getColumnList:function(e){var l=[];return e.forEach(function(e){l.push.apply(l,e.children&&e.children.length?UtilTools.getColumnList(e.children):[e])}),l},formatText:function(e,l){return""+(null==e?l?_conf.default.emptyCell:"":e)},getCellValue:function(e,l){return _xeUtils.default.get(e,l.property)},getCellLabel:function(e,l,t){var r=l.formatter,n=UtilTools.getCellValue(e,l),i=n;if(t&&r){var o=t.$table,a=o&&o.fullAllDataRowMap.has(e);if(a){var u=o.fullAllDataRowMap.get(e).formatData;if(u&&u.value===n)return u.label}i=_xeUtils.default.isString(r)?_xeUtils.default[r](n):_xeUtils.default.isArray(r)?_xeUtils.default[r[0]].apply(_xeUtils.default,[n].concat(r.slice(1))):r(Object.assign({cellValue:n},t)),a&&(o.fullAllDataRowMap.get(e).formatData={value:n,label:i})}return i},setCellValue:function(e,l,t){return _xeUtils.default.set(e,l.property,t)},getColumnConfig:function(e,l){return e instanceof ColumnConfig?e:new ColumnConfig(e,l)},assemColumn:function(e){var l=e.$table,t=e.$parent,r=e.columnConfig,n=t.columnConfig;r.slots=e.$scopedSlots,n&&0<t.$children.length?(n.children||(n.children=[]),n.children.splice([].indexOf.call(t.$el.children,e.$el),0,r)):l.collectColumn.splice([].indexOf.call(l.$refs.hideColumn.children,e.$el),0,r)},destroyColumn:function(e){var l=e.$table,t=e.columnConfig,r=_xeUtils.default.findTree(l.collectColumn,function(e){return e===t});r&&r.items.splice(r.index,1)},hasChildrenList:function(e){return e&&e.children&&0<e.children.length}},_default=exports.UtilTools=UtilTools;exports.default=_default;