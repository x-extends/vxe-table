"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.UtilTools=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../conf"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var columnUniqueId=0,ColumnConfig=function e(t){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=l.renderHeader,n=l.renderCell,o=l.renderData;_classCallCheck(this,e),t.cellRender&&t.editRender&&UtilTools.warn("vxe.error.cellEditRender"),"selection"===t.type&&UtilTools.warn("vxe.error.delProp",["selection","checkbox"]),Object.assign(this,{id:"col_".concat(++columnUniqueId),type:t.type,prop:t.prop,property:t.field||t.prop,title:t.title,label:t.label,width:t.width,minWidth:t.minWidth,resizable:t.resizable,fixed:t.fixed,align:t.align,headerAlign:t.headerAlign,footerAlign:t.footerAlign,showOverflow:t.showOverflow,showHeaderOverflow:t.showHeaderOverflow,className:t.class||t.className,headerClassName:t.headerClassName,footerClassName:t.footerClassName,indexMethod:t.indexMethod,formatter:t.formatter,sortable:t.sortable,sortBy:t.sortBy,sortMethod:t.sortMethod,remoteSort:t.remoteSort,filters:UtilTools.getFilters(t.filters),filterMultiple:!_xeUtils.default.isBoolean(t.filterMultiple)||t.filterMultiple,filterMethod:t.filterMethod,filterRender:t.filterRender,treeNode:t.treeNode,columnKey:t.columnKey,cellRender:t.cellRender,editRender:t.editRender,params:t.params,visible:!0,level:1,rowSpan:1,colSpan:1,order:null,renderWidth:0,renderHeight:0,resizeWidth:0,renderLeft:0,renderHeader:r||t.renderHeader,renderCell:n||t.renderCell,renderData:o,slots:t.slots,own:t})};function outLog(r){return function(e,t){var l=UtilTools.getLog(e,t);return console[r](l),l}}var UtilTools={warn:outLog("warn"),error:outLog("error"),getLog:function(e,t){return"[vxe-table] ".concat(_xeUtils.default.template(_conf.default.i18n(e),t))},getSize:function(e){var t=e.size,l=e.$parent;return t||(l&&-1<["medium","small","mini"].indexOf(l.size)?l.size:null)},getFuncText:function(e){return _xeUtils.default.isFunction(e)?e():_conf.default.translate?_conf.default.translate(e):e},getRowkey:function(e){var t=e.rowKey,l=e.rowId,r=e.treeConfig,n=void 0===r?{}:r,o=e.expandConfig,i=void 0===o?{}:o,a=e.editConfig,s=void 0===a?{}:a,u=e.checkboxConfig||e.selectConfig||{};return t&&_xeUtils.default.isString(t)||(t=l||u.key||n.key||i.key||s.key||_conf.default.rowId),t},getRowid:function(e,t,l){var r=UtilTools.getRowkey(e);return"".concat(r?encodeURIComponent(_xeUtils.default.get(t,r)||""):l)},emitEvent:function(e,t,l){e.$listeners[t]&&e.$emit.apply(e,[t].concat(l))},getColumnList:function(e){var t=[];return e.forEach(function(e){t.push.apply(t,e.children&&e.children.length?UtilTools.getColumnList(e.children):[e])}),t},getClass:function(e,t){return e?_xeUtils.default.isFunction(e)?e(t):e:""},getFilters:function(e){return(e||[]).map(function(e){var t=e.label,l=e.value,r=e.data;return{label:t,value:l,data:r,_data:r,checked:!!e.checked}})},formatText:function(e,t){return""+(null==e?t?_conf.default.emptyCell:"":e)},getCellValue:function(e,t){return _xeUtils.default.get(e,t.property)},getCellLabel:function(e,t,l){var r=t.formatter,n=UtilTools.getCellValue(e,t),o=n;if(l&&r){var i,a,s=l.$table,u=t.id;if(s&&s.fullAllDataRowMap.has(e)&&((a=(i=s.fullAllDataRowMap.get(e)).formatData)||(a=s.fullAllDataRowMap.get(e).formatData={})),i&&a[u]&&a[u].value===n)return a[u].label;o=_xeUtils.default.isString(r)?_xeUtils.default[r](n):_xeUtils.default.isArray(r)?_xeUtils.default[r[0]].apply(_xeUtils.default,[n].concat(r.slice(1))):r(Object.assign({cellValue:n},l)),a&&(a[u]={value:n,label:o})}return o},setCellValue:function(e,t,l){return _xeUtils.default.set(e,t.property,l)},getColumnConfig:function(e,t){return e instanceof ColumnConfig?e:new ColumnConfig(e,t)},assemColumn:function(e){var t=e.$table,l=e.$parent,r=e.columnConfig,n=l.columnConfig;r.slots=e.$scopedSlots,n&&0<l.$children.length?(n.children||(n.children=[]),n.children.splice([].indexOf.call(l.$el.children,e.$el),0,r)):t.collectColumn.splice([].indexOf.call(t.$refs.hideColumn.children,e.$el),0,r)},destroyColumn:function(e){var t=e.$table,l=e.columnConfig,r=_xeUtils.default.findTree(t.collectColumn,function(e){return e===l});r&&r.items.splice(r.index,1)},hasChildrenList:function(e){return e&&e.children&&0<e.children.length}},_default=exports.UtilTools=UtilTools;exports.default=_default;