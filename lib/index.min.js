(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("xe-utils")):"function"===typeof define&&define.amd?define(["xe-utils"],t):"object"===typeof exports?exports["VXETable"]=t(require("xe-utils")):e["VXETable"]=t(e["XEUtils"])})("undefined"!==typeof self?self:this,function(e){return function(e){var t={};function l(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,l),i.l=!0,i.exports}return l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(r,i,function(t){return e[t]}.bind(null,i));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s="fb15")}({"1a97":function(e,t,l){},f0af:function(t,l){t.exports=e},f6fd:function(e,t){(function(e){var t="currentScript",l=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(r){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(e in l)if(l[e].src==t||"interactive"==l[e].readyState)return l[e];return null}}})})(document)},fb15:function(e,t,l){"use strict";var r;(l.r(t),"undefined"!==typeof window)&&(l("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(l.p=r[1]));var i=l("f0af"),n=l.n(i);const o={version:0,optimization:{animat:!0,scrollX:{gt:60,oSize:6,rSize:18,vSize:0},scrollY:{gt:500,oSize:30,rSize:80,vSize:0,rHeight:0}},tooltipConfig:{theme:"dark"},iconMap:{sortAsc:"vxe-icon--caret-top",sortDesc:"vxe-icon--caret-bottom",filter:"vxe-icon--funnel",edit:"vxe-icon--edit-outline",tree:"vxe-icon--caret-right",jumpPrev:"vxe-icon--d-arrow-left",jumpNext:"vxe-icon--d-arrow-right",prevPage:"vxe-icon--arrow-left",nextPage:"vxe-icon--arrow-right"},pager:{},toolbar:{},i18n:e=>e};var s=o,a={data:Array,customs:Array,height:[Number,String],maxHeight:[Number,String],resizable:Boolean,stripe:Boolean,border:Boolean,size:{type:String,default:()=>s.size},fit:{type:Boolean,default:!0},loading:Boolean,showHeader:{type:Boolean,default:!0},startIndex:{type:Number,default:0},highlightCurrentRow:Boolean,highlightHoverRow:Boolean,showFooter:Boolean,footerMethod:Function,rowClassName:[String,Function],cellClassName:[String,Function],headerRowClassName:[String,Function],headerCellClassName:[String,Function],footerRowClassName:[String,Function],footerCellClassName:[String,Function],spanMethod:Function,showAllOverflow:{type:[Boolean,String],default:()=>s.showAllOverflow},showHeaderAllOverflow:{type:[Boolean,String],default:()=>s.showHeaderAllOverflow},rowKey:[String,Number],autoResize:Boolean,radioConfig:Object,selectConfig:Object,tooltipConfig:Object,expandConfig:Object,treeConfig:Object,contextMenu:{type:Object,default:()=>s.contextMenu},mouseConfig:Object,keyboardConfig:Object,editConfig:Object,editRules:Object,optimization:Object};const c={"event.clear_actived":[]},d={get(e){return c[e]||[]},add(e,t){let l=c[e];l&&t&&-1===l.indexOf(t)&&l.push(t)},delete(e,t){let l=c[e];l&&n.a.remove(l,e=>e===t)}};var h=d,u=0;const p={getSize({size:e,$parent:t}){return e||(t&&["medium","small","mini"].indexOf(t.size)>-1?t.size:null)},getRowKey(e){let{rowKey:t,selectConfig:l={},treeConfig:r={},expandConfig:i={},editConfig:n={}}=e;return t||(t=l.key||r.key||i.key||n.key),t},getRowId(e,t,l){let r=p.getRowKey(e);return`${encodeURIComponent(r?n.a.get(t,r):l)}`},emitEvent(e,t,l){e.$listeners[t]&&e.$emit.apply(e,[t].concat(l))},getColumnList(e){let t=[];return e.forEach(e=>{e.children&&e.children.length?t.push.apply(t,p.getColumnList(e.children)):t.push(e)}),t},formatText(e){return""+(null===e||void 0===e?"":e)},getCellValue(e,t){return n.a.get(e,t.property)},getCellLabel(e,t,l){let r=n.a.get(e,t.property);return l&&t.formatter?t.formatter(Object.assign({cellValue:r},l)):r},setCellValue(e,t,l){return n.a.set(e,t.property,l)},getColumnConfig(e,{renderHeader:t,renderCell:l,renderData:r}={}){return{id:`col--${++u}`,type:e.type,property:e.prop,label:e.label,width:e.width,minWidth:e.minWidth,resizable:e.resizable,fixed:e.fixed,align:e.align,headerAlign:e.headerAlign,showOverflow:e.showOverflow,showHeaderOverflow:e.showHeaderOverflow,indexMethod:e.indexMethod,formatter:e.formatter,sortable:e.sortable,sortBy:e.sortBy,remoteSort:e.remoteSort,filters:(e.filters||[]).map(({label:e,value:t})=>({label:e,value:t,checked:!1})),filterMultiple:e.filterMultiple,filterMethod:e.filterMethod,remoteFilter:e.remoteFilter,treeNode:e.treeNode,columnKey:e.columnKey,editRender:e.editRender,visible:!0,level:1,rowSpan:1,colSpan:1,order:null,renderWidth:0,renderHeight:0,resizeWidth:0,renderLeft:0,renderHeader:t||e.renderHeader,renderCell:l||e.renderCell,renderData:r,slots:e.slots,origin:e}},assemColumn(e){let{$table:t,$parent:l,columnConfig:r}=e,i=l.columnConfig;r.slots=e.$scopedSlots,i&&l.$children.length>0?(i.children||(i.children=[]),i.children.splice([].indexOf.call(l.$el.children,e.$el),0,r)):t.collectColumn.splice([].indexOf.call(t.$refs.hideColumn.children,e.$el),0,r)},destroyColumn(e){let{$table:t,columnConfig:l}=e,r=n.a.findTree(t.collectColumn,e=>e===l);r&&r.items.splice(r.index,1)},hasChildrenList(e){return e&&e.children&&e.children.length>0}};var g=p;const m=n.a.browse(),f=document.querySelector("html"),x=document.body,v={browse:m,isPx(e){return e&&/^\d+(px)?$/.test(e)},isScale(e){return e&&/^\d+%$/.test(e)},hasClass(e,t){return e&&e.className&&e.className.split&&e.className.split(" ").indexOf(t)>-1},getDomNode(){return{scrollTop:document.documentElement.scrollTop||document.body.scrollTop,scrollLeft:document.documentElement.scrollLeft||document.body.scrollLeft,visibleHeight:document.documentElement.clientHeight||document.body.clientHeight,visibleWidth:document.documentElement.clientWidth||document.body.clientWidth}},getEventTargetNode(e,t,l){let r,i=e.target;while(i&&i.nodeType&&i!==document){if(l&&v.hasClass(i,l))r=i;else if(i===t)return{flag:!l||!!r,container:t,targetElem:r};i=i.parentNode}return{flag:!1}},getOffsetPos(e,t){return b(e,t,{left:0,top:0})},getCellIndexs(e){let t=e.parentNode,l=[].indexOf.call(t.children,e),r=[].indexOf.call(t.parentNode.children,t);return{rowIndex:r,columnIndex:l}},getCell(e,{row:t,rowIndex:l,column:r}){let i=g.getRowId(e,t,l);return e.$refs.tableBody.$el.querySelector(`.vxe-body--row[data-rowkey="${i}"] .${r.id}`)},getCursorPosition(e){let t={text:"",start:0,end:0};if(e.setSelectionRange)t.start=e.selectionStart,t.end=e.selectionEnd,t.text=t.start!==t.end?e.value.substring(t.start,t.end):"";else if(document.selection){let l=0,r=document.selection.createRange(),i=document.body.createTextRange();for(i.moveToElementText(e),t.text=r.text,t.bookmark=r.getBookmark();i.compareEndPoints("StartToStart",r)<0&&0!==r.moveStart("character",-1);l++)"\n"===e.value.charAt(l)&&l++;t.start=l,t.end=t.text.length+t.start}return t},setCursorPosition(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t.start,t.end);else if(e.createTextRange){let l=e.createTextRange();e.value.length===t.start?(l.collapse(!1),l.select()):(l.moveToBookmark(t.bookmark),l.select())}}};function b(e,t,l){if(e){let r=e.parentNode;if(l.top+=e.offsetTop,l.left+=e.offsetLeft,r&&r!==f&&r!==x&&(l.top-=r.scrollTop,l.left-=r.scrollLeft),(!t||e!==t&&e.offsetParent!==t)&&e.offsetParent)return b(e.offsetParent,t,l)}return l}var w=v;const C={getCsvContent(e,t,l,r){let i=e.original,{columns:n,datas:o}=y(e,t,l,r),s="\ufeff";return e.isHeader&&(s+=n.map(e=>e.label).join(",")+"\n"),o.forEach((e,t)=>{s+=i?n.map(l=>{return"index"===l.type?`"${l.indexMethod?l.indexMethod(t):t+1}"`:`"${g.getCellValue(e,l)||""}"`}).join(",")+"\n":n.map(t=>`"${e[t.id]}"`).join(",")+"\n"}),s},downloadCsc(e,t){if(!e.download)return Promise.resolve(t);if(navigator.msSaveBlob&&window.Blob)navigator.msSaveBlob(new Blob([t],{type:"text/csv"}),e.filename);else if(w.browse["-ms"]){var l=window.top.open("about:blank","_blank");l.document.charset="utf-8",l.document.write(t),l.document.close(),l.document.execCommand("SaveAs",e.filename),l.close()}else{var r=document.createElement("a");r.target="_blank",r.download=e.filename,r.href=$(e,t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}}};function S(e,t,l){let r=l.querySelectorAll(".vxe-table--body-wrapper.body--wrapper .vxe-body--row");return Array.from(r).map(t=>{let l={};return e.forEach(e=>{let r=t.querySelector(`.${e.id}`);l[e.id]=r?r.innerText.trim():""}),l})}function y(e,t,l,r){let i=e.original,n=e.columns?e.columns:l;e.columnFilterMethod&&(n=n.filter(e.columnFilterMethod));let o=e.data?e.data:i?t:S(n,t,r);return e.dataFilterMethod&&(o=o.filter(e.dataFilterMethod)),{columns:n,datas:o}}function $(e,t){return window.Blob&&window.URL&&window.URL.createObjectURL&&!w.browse.safari?URL.createObjectURL(new Blob([t],{type:"text/csv"})):`data:attachment/csv;charset=utf-8,${encodeURIComponent(t)}`}const k=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",E=[],T={on(e,t,l){E.push({comp:e,type:t,cb:l})},off(e,t){n.a.remove(E,l=>l.comp===e&&l.type===t)},trigger(e){E.forEach(({comp:t,type:l,cb:r})=>{(l===e.type||"mousewheel"===l&&e.type===k)&&r.call(t,e)})}};document.addEventListener("keydown",T.trigger,!1),document.addEventListener("contextmenu",T.trigger,!1),window.addEventListener("mousedown",T.trigger,!1),window.addEventListener("blur",T.trigger,!1),window.addEventListener("resize",T.trigger,!1),window.addEventListener(k,T.trigger,!1);const I=[],M=250;var R=null;function z(){clearTimeout(R),R=setTimeout(O.handle,s.resizeInterval||M)}const O={on(e,t,l){I.length||z(),I.some(l=>l.comp===e&&l.target===t)||I.push({comp:e,target:t,cb:l,width:t.clientWidth,heighe:t.clientWidth})},off(e,t){n.a.remove(I,l=>l.comp===e&&l.target===t)},handle(){I.length&&(I.forEach(e=>{let{comp:t,target:l,cb:r,width:i,heighe:n}=e,o=l.clientWidth,s=l.clientHeight,a=o&&i!==o,c=s&&n!==s;(a||c)&&(e.width=o,e.heighe=s,r.call(t,{type:"resize",target:l,rWidth:a,rHeight:c,currentTarget:l}))}),R=setTimeout(O.handle,s.resizeInterval||M))}};function D(e,t,l,r){let{$table:i,row:n,column:o}=r,{name:s}=l;return[e("div",{class:"vxe-input--wrapper"},[e(s,{class:`vxe-${s}`,attrs:t,domProps:{value:p.getCellValue(n,o)},on:{input(e){p.setCellValue(n,o,e.target.value),i.updateStatus(r)}}})])]}const P=24,L={input:{autofocus:".vxe-input",renderEdit(e,t,l){return D(e,{type:"text"},t,l)}},textarea:{autofocus:".vxe-textarea",renderEdit(e,t,l){return D(e,null,t,l)}},cell:{autofocus:".vxe-textarea",renderEdit(e,t,l,{$excel:r}){let{excelStore:i}=r,{uploadRows:n}=i,{row:o,column:s}=l;return[e("div",{class:"vxe-input--wrapper vxe-excel-cell",style:{height:`${s.renderHeight-1}px`}},[e("textarea",{class:"vxe-textarea",style:{width:`${s.renderWidth}px`},domProps:{value:p.getCellValue(o,s)},on:{input(e){let t=e.target;p.setCellValue(o,s,e.target.value),t.scrollHeight>t.offsetHeight&&(-1===n.indexOf(o)?t.style.width=`${t.offsetWidth+20}px`:t.style.height=`${t.scrollHeight}px`)},change(){-1===n.indexOf(o)&&n.push(o)},keydown(e){let t=e.target;if(e.altKey&&13===e.keyCode){e.preventDefault(),e.stopPropagation();let l=t.value,r=v.getCursorPosition(t),i=r.end;p.setCellValue(o,s,`${l.slice(0,i)}\n${l.slice(i,l.length)}`),t.style.height=`${(Math.floor(t.offsetHeight/P)+1)*P}px`,setTimeout(()=>{r.start=r.end=++i,v.setCursorPosition(t,r)})}}}})])]},renderCell(e,t,l){let{row:r,column:i}=l;return[e("span",{domProps:{innerHTML:n.a.escape(p.getCellValue(r,i)).replace(/\n/g,"<br>")}})]}}},H={mixin(e){return Object.assign(L,e),H},get(e){return L[e]||null},add(e,t){return e&&t&&(L[e]=t),H},delete(e){return delete L[e],H}};var A=H;function F(e={}){let{iconMap:t}=s;e.iconMap&&Object.assign(t,e.iconMap),Object.assign(s,e,{iconMap:t})}var W=F;const j=[];function N(e,t){e&&e.install&&-1===j.indexOf(e)&&(e.install({setup:W,interceptor:h,renderer:A},t),j.push(e))}var B=N;const V={t:n.a.get,use:B,setup:W,interceptor:h,renderer:A};var X=V;const q={createColumn(e,t){let{type:l,sortable:r,remoteSort:i,filters:n,editRender:o,treeNode:s}=t,{selectConfig:a,treeConfig:c}=e,d=c&&s,h={renderHeader:this.renderHeader,renderCell:d?this.renderTreeCell:this.renderCell};switch(l){case"index":h.renderHeader=this.renderIndexHeader,h.renderCell=d?this.renderTreeIndexCell:this.renderIndexCell;break;case"radio":h.renderHeader=this.renderRadioHeader,h.renderCell=d?this.renderTreeRadioCell:this.renderRadioCell;break;case"selection":h.renderHeader=this.renderSelectionHeader,h.renderCell=a&&a.checkProp?d?this.renderTreeSelectionCellByProp:this.renderSelectionCellByProp:d?this.renderTreeSelectionCell:this.renderSelectionCell;break;case"expand":h.renderCell=this.renderExpandCell,h.renderData=this.renderExpandData;break;default:o?(h.renderHeader=this.renderEditHeader,h.renderCell=e.editConfig&&"cell"===e.editConfig.mode?d?this.renderTreeCellEdit:this.renderCellEdit:d?this.renderTreeRadioCell:this.renderRowEdit):n&&n.length&&(r||i)?h.renderHeader=this.renderSortAndFilterHeader:r||i?h.renderHeader=this.renderSortHeader:n&&n.length&&(h.renderHeader=this.renderFilterHeader)}return p.getColumnConfig(t,h)},renderHeader(e,t){let{column:l}=t,{slots:r}=l;return r&&r.header?r.header(t):[p.formatText(t.column.origin.label)]},renderCell(e,t){let l,{row:r,rowIndex:i,column:n,columnIndex:o}=t,{slots:s,formatter:a}=n;return s&&s.default?s.default(t):(l=p.getCellValue(r,n),a&&(l=a({cellValue:l,row:r,rowIndex:i,column:n,columnIndex:o})),[p.formatText(l)])},renderTreeCell(e,t){return q.renderTreeIcon(e,t).concat(q.renderCell(e,t))},renderTreeIcon(e,t){let{iconMap:l}=s,{$table:r}=t,{treeConfig:i,treeExpandeds:n}=r,{row:o,level:a}=t,{children:c,indent:d,trigger:h}=i,u=o[c],p={};return h&&"default"!==h||(p.click=e=>r.triggerTreeExpandEvent(e,t)),[e("span",{class:"vxe-tree--indent",style:{width:`${a*(d||16)}px`}}),e("span",{class:["vxe-tree-wrapper",{"is--active":n.indexOf(o)>-1}],on:p},u&&u.length?[e("i",{class:["vxe-tree--node-btn",l.tree]})]:[])]},renderIndexHeader(e,t){let{column:l}=t,{slots:r}=l;return r&&r.header?r.header(t):[p.formatText(t.column.origin.label||"#")]},renderIndexCell(e,t){let{$table:l,column:r}=t,{startIndex:i}=l,{slots:n,indexMethod:o}=r;if(n&&n.default)return n.default(t);let{seq:s,level:a}=t;return[p.formatText(o?o(t):a?`${a}.${s}`:i+s)]},renderTreeIndexCell(e,t){return q.renderTreeIcon(e,t).concat(q.renderIndexCell(e,t))},renderRadioHeader(e,t){return[p.formatText(t.column.origin.label)]},renderRadioCell(e,t){let{$table:l,column:r}=t,{radioConfig:i={}}=l,{slots:o}=r,{labelProp:s}=i;if(o&&o.header)return o.header(t);let{selectRow:a}=l,{row:c}=t,d={attrs:{type:"radio",name:`vxe-radio--${l.id}`}};return t.isHidden||(d.domProps={checked:c===a},d.on={change(e){l.triggerRowEvent(e,t)}}),[e("label",{class:["vxe-radio"]},[e("input",d),e("span",{class:["radio--icon"]}),s?e("span",{class:"radio--label"},n.a.get(c,s)):null])]},renderTreeRadioCell(e,t){return q.renderTreeIcon(e,t).concat(q.renderRadioCell(e,t))},renderSelectionHeader(e,t){let{$table:l,column:r}=t,{slots:i}=r;if(i&&i.header)return i.header(t);let{isHidden:n}=t,o={attrs:{type:"checkbox"}};return n||(o.domProps={checked:l.isAllSelected},o.on={change(e){l.triggerCheckAllEvent(e,e.target.checked)}}),[e("label",{class:["vxe-checkbox",{"is--indeterminate":l.isIndeterminate}]},[e("input",o),e("span",{class:["checkbox--icon"]}),r.origin.label?e("span",{class:"checkbox--label"},r.origin.label):null])]},renderSelectionCell(e,t){let{$table:l}=t,{selectConfig:r={},treeConfig:i,treeIndeterminates:o}=l,{labelProp:s,checkMethod:a}=r,{row:c,isHidden:d}=t,h=!1,u=!!a,p={attrs:{type:"checkbox"}};return d||(a&&(u=!a(t),p.attrs.disabled=u),i&&(h=o.indexOf(c)>-1),p.domProps={checked:l.selection.indexOf(c)>-1},p.on={change(e){l.triggerCheckRowEvent(e,t,e.target.checked)}}),[e("label",{class:["vxe-checkbox",{"is--indeterminate":h,"is--disabled":u}]},[e("input",p),e("span",{class:["checkbox--icon"]}),s?e("span",{class:"checkbox--label"},n.a.get(c,s)):null])]},renderTreeSelectionCell(e,t){return q.renderTreeIcon(e,t).concat(q.renderSelectionCell(e,t))},renderSelectionCellByProp(e,t){let{$table:l}=t,{selectConfig:r={},treeConfig:i,treeIndeterminates:o}=l,{labelProp:s,checkProp:a,checkMethod:c}=r,{row:d,isHidden:h}=t,u=!1,p=!!c,g={attrs:{type:"checkbox"}};return h||(c&&(p=!c(t),g.attrs.disabled=p),i&&(u=o.indexOf(d)>-1),g.domProps={checked:n.a.get(d,a)},g.on={change(e){l.triggerCheckRowEvent(e,t,e.target.checked)}}),[e("label",{class:["vxe-checkbox",{"is--indeterminate":u,"is--disabled":p}]},[e("input",g),e("span",{class:["checkbox--icon"]}),s?e("span",{class:"checkbox--label"},n.a.get(d,s)):null])]},renderTreeSelectionCellByProp(e,t){return q.renderTreeIcon(e,t).concat(q.renderSelectionCellByProp(e,t))},renderExpandCell(e,t){let{$table:l,isHidden:r}=t,i=!1;return r||(i=l.expandeds.indexOf(t.row)>-1),[e("span",{class:["vxe-table--expanded",{"expand--active":i}],on:{click(e){l.triggerRowExpandEvent(e,t)}}},[e("i",{class:["vxe-table--expand-icon"]})])]},renderExpandData(e,t){let{column:l}=t,{slots:r}=l;return r&&r.default?r.default(t):[]},renderSortAndFilterHeader(e,t){return q.renderHeader(e,t).concat(q.renderSortIcon(e,t)).concat(q.renderFilterIcon(e,t))},renderSortHeader(e,t){return q.renderHeader(e,t).concat(q.renderSortIcon(e,t))},renderSortIcon(e,t){let{iconMap:l}=s,{$table:r,column:i}=t;return[e("span",{class:["vxe-sort-wrapper"]},[e("i",{class:["vxe-sort--asc-btn",l.sortAsc,{"sort--active":"asc"===i.order}],on:{click(e){r.triggerSortEvent(e,i,t,"asc")}}}),e("i",{class:["vxe-sort--desc-btn",l.sortDesc,{"sort--active":"desc"===i.order}],on:{click(e){r.triggerSortEvent(e,i,t,"desc")}}})])]},renderFilterHeader(e,t){return q.renderHeader(e,t).concat(q.renderFilterIcon(e,t))},renderFilterIcon(e,t){let{iconMap:l}=s,{$table:r,column:i}=t,{filterStore:n}=r;return[e("span",{class:["vxe-filter-wrapper",{"is--active":n.visible&&n.column===i}]},[e("i",{class:["vxe-filter--btn",l.filter],on:{click(e){r.triggerFilterEvent(e,t.column,t)}}})])]},renderEditHeader(e,t){let l,{iconMap:r}=s,{$table:i,column:o}=t,{editRules:a,editConfig:c}=i,{sortable:d,remoteSort:h,filters:u}=o;if(a){let e=n.a.get(a,t.column.property);e&&(l=e.some(e=>e.required))}return[l?e("i",{class:"vxe-required-icon"}):null,c&&!1===c.showIcon?null:e("i",{class:["vxe-edit-icon",r.edit]})].concat(q.renderHeader(e,t)).concat(d||h?q.renderSortIcon(e,t):[]).concat(u&&u.length?q.renderFilterIcon(e,t):[])},renderRowEdit(e,t){let{$table:l}=t,{actived:r}=l.editStore;return q.runRenderer(e,t,this,r&&r.row===t.row)},renderTreeRowEdit(e,t){return q.renderTreeIcon(e,t).concat(q.renderRowEdit(e,t))},renderCellEdit(e,t){let{$table:l}=t,{actived:r}=l.editStore;return q.runRenderer(e,t,this,r&&r.row===t.row&&r.column===t.column)},renderTreeCellEdit(e,t){return q.renderTreeIcon(e,t).concat(q.renderCellEdit(e,t))},runRenderer(e,t,l,r){let{$table:i,column:n}=t,{slots:o}=n,s=l?l.editRender:n.editRender,a=H.get(s.name),c={$excel:i.$parent,$table:i,$column:n};return"visible"===s.type||r?o&&o.edit?o.edit(t):a&&a.renderEdit?a.renderEdit(e,s,t,c):[]:a&&a.renderCell?a.renderCell(e,s,t,c):q.renderCell(e,t)}};var Y=q,_=0;function K(e,t,l){let{tableData:r,tableColumn:i,visibleColumn:o,collectColumn:s,isGroup:a,height:c,containerHeight:d,vSize:h,headerHeight:u,footerHeight:p,showHeader:g,showFooter:m,tableHeight:f,scrollYWidth:x,scrollXHeight:v,scrollRightToLeft:b,scrollLeftToRight:w,columnStore:C,footerData:S}=t,y="auto"===c?d:n.a.toNumber(c),$="right"===l,k=C[`${l}List`],E={height:`${(y>0?y-u-p:f)+u+p-v*(m?2:1)}px`,width:`${k.reduce((e,t)=>e+t.renderWidth,$?x:0)}px`};return e("div",{class:[`vxe-table--fixed-${l}-wrapper`,{"scrolling--middle":$?b:w}],style:E,ref:"fixedTable"},[g?e("vxe-table-header",{props:{fixedType:l,tableData:r,tableColumn:i,visibleColumn:o,collectColumn:s,size:h,fixedColumn:k,isGroup:a},ref:`${l}Header`}):null,e("vxe-table-body",{style:{top:`${u}px`},props:{fixedType:l,tableData:r,tableColumn:i,visibleColumn:o,collectColumn:s,fixedColumn:k,size:h,isGroup:a},ref:`${l}Body`}),m?e("vxe-table-footer",{style:{top:`${y?y-p:f}px`},props:{fixedType:l,footerData:S,tableColumn:i,visibleColumn:o,size:h,fixedColumn:k},ref:`${l}Footer`}):null])}var G={name:"VxeTable",props:a,provide(){return{$table:this}},data(){return{id:n.a.uniqueId(),headerProps:{children:"children"},collectColumn:[],tableFullColumn:[],tableColumn:[],tableData:[],containerHeight:0,tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollYWidth:0,scrollXHeight:0,scrollLeftToRight:!1,scrollRightToLeft:!1,isAllSelected:!1,isIndeterminate:!1,selection:[],selectRow:null,expandeds:[],treeExpandeds:[],treeIndeterminates:[],hoverRow:null,isLoading:!1,filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],scaleList:[],scaleMinList:[],autoList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},scrollXStore:{renderSize:0,visibleSize:0,offsetSize:0,rowHeight:0,startIndex:0,visibleIndex:0,leftSpaceWidth:0,rightSpaceWidth:0},scrollYStore:{renderSize:0,visibleSize:0,offsetSize:0,rowHeight:0,startIndex:0,visibleIndex:0,topSpaceHeight:0,bottomSpaceHeight:0},tooltipStore:{visible:!1,row:null,column:null,content:null,style:null,arrowStyle:null,placement:null},editStore:{checked:{rows:[],columns:[],tRows:[],tColumns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},insertList:[],removeList:[]},validStore:{visible:!1,row:null,column:null,rule:null,style:null,placement:null}}},computed:{vSize(){return this.size||this.$parent.size||this.$parent.vSize},optimizeOpts(){return Object.assign({},s.optimization,this.optimization)},tooltipOpts(){return Object.assign({},s.tooltipConfig,this.tooltipConfig)},isGroup(){return this.collectColumn.some(e=>p.hasChildrenList(e))},visibleColumn(){return this.tableFullColumn?this.tableFullColumn.filter(e=>e.visible):[]},isResizable(){return this.resizable||this.tableFullColumn.some(e=>e.resizable)},isFilter(){return this.tableColumn.some(e=>e.filters&&e.filters.length)},headerCtxMenu(){return this.ctxMenuConfig.header&&this.ctxMenuConfig.header.options?this.ctxMenuConfig.header.options:[]},bodyCtxMenu(){return this.ctxMenuConfig.body&&this.ctxMenuConfig.body.options?this.ctxMenuConfig.body.options:[]},isCtxMenu(){return this.headerCtxMenu.length||this.bodyCtxMenu.length},ctxMenuConfig(){return Object.assign({},this.contextMenu)},ctxMenuList(){let e=[];return this.ctxMenuStore.list.forEach(t=>{t.forEach(t=>{e.push(t)})}),e},footerData(){let{showFooter:e,visibleColumn:t,tableFullData:l,data:r,footerMethod:i}=this;return e&&i&&(t.length||r)?i({columns:t,data:l}):["-"]}},watch:{data(e){this.isUpdateData||this.loadData(e,!0).then(this.handleDefaultExpand),this.isUpdateData=!1},customs(e){this.isUpdateCustoms||this.mergeCustomColumn(e),this.isUpdateCustoms=!1},collectColumn(e){let t=p.getColumnList(e);this.tableFullColumn=t,this.updateCacheMap(t,"fullColumn")},tableColumn(){this.analyColumnWidth()},height(){this.$nextTick(this.recalculate)},loading(){this.isLoading||(this.isLoading=!0)}},created(){let{scrollYStore:e,optimizeOpts:t,selectConfig:l,treeConfig:r,editConfig:i,loading:n}=this,{scrollY:o}=t;n&&(this.isLoading=!0),o&&Object.assign(e,{startIndex:0,visibleIndex:0,renderSize:o.rSize,offsetSize:o.oSize}),this.afterFullData=[],this.fullDataIndexMap=new Map,this.fullDataKeyMap=new Map,this.fullColumnIndexMap=new Map,this.loadData(this.data,!0).then(()=>{let e=p.getRowKey(this);if(l&&l.reserve&&!e)throw new Error("[vxe-table] Checkbox status reserve must have a unique primary key.");if(r&&!e)throw new Error("[vxe-table] Tree table must have a unique primary key.");if(i&&!e)throw new Error("[vxe-table] Editable must have a unique primary key.");this.tableFullColumn=p.getColumnList(this.collectColumn),this.customs&&this.mergeCustomColumn(this.customs),this.refreshColumn(),this.handleDefaultExpand()}),T.on(this,"mousedown",this.handleGlobalMousedownEvent),T.on(this,"blur",this.handleGlobalBlurEvent),T.on(this,"contextmenu",this.handleGlobalContextmenuEvent),T.on(this,"mousewheel",this.handleGlobalMousewheelEvent),T.on(this,"keydown",this.handleGlobalKeydownEvent),T.on(this,"resize",this.handleGlobalResizeEvent)},mounted(){this.autoResize&&O.on(this,this.$el.parentNode,this.recalculate),document.body.appendChild(this.$refs.tableWrapper)},beforeDestroy(){let e=this.$refs.tableWrapper;e&&e.parentNode&&e.parentNode.removeChild(e),this.afterFullData.length=0,this.fullDataIndexMap.clear(),this.fullColumnIndexMap.clear(),this.closeFilter(),this.closeContextMenu(),O.off(this,this.$el.parentNode)},destroyed(){T.off(this,"mousedown"),T.off(this,"blur"),T.off(this,"contextmenu"),T.off(this,"mousewheel"),T.off(this,"keydown"),T.off(this,"resize")},render(e){let{_e:t,id:l,tableData:r,tableColumn:i,visibleColumn:n,collectColumn:o,isGroup:s,isFilter:a,isResizable:c,isCtxMenu:d,loading:h,isLoading:u,showHeader:g,border:m,stripe:f,highlightHoverRow:x,vSize:v,tooltipOpts:b,editConfig:w,showFooter:C,footerMethod:S,overflowX:y,overflowY:$,scrollXHeight:k,optimizeOpts:E,columnStore:T,filterStore:I,ctxMenuStore:M,tooltipStore:R,validStore:z,footerData:O}=this,{leftList:D,rightList:P}=T;return e("div",{class:["vxe-table",v?`size--${v}`:"",{"vxe-editable":w,"show--head":g,"show--foot":C,"scroll--y":$,"scroll--x":y,"fixed--left":D.length,"fixed--right":P.length,"t--animat":E.animat,"t--stripe":f,"t--border":m,"t--highlight":x}]},[e("div",{class:["vxe-table-hidden-column"],ref:"hideColumn"},this.$slots.default),g?e("vxe-table-header",{ref:"tableHeader",props:{tableData:r,tableColumn:i,visibleColumn:n,collectColumn:o,size:v,isGroup:s}}):t(),e("vxe-table-body",{ref:"tableBody",props:{tableData:r,tableColumn:i,visibleColumn:n,collectColumn:o,size:v,isGroup:s}}),C?e("vxe-table-footer",{props:{footerData:O,footerMethod:S,tableColumn:i,visibleColumn:n,size:v},ref:"tableFooter"}):t(),D&&D.length&&y?K(e,this,"left"):t(),P&&P.length&&y?K(e,this,"right"):t(),c?e("div",{class:["vxe-table--resizable-bar"],style:y?{"padding-bottom":`${k}px`}:null,ref:"resizeBar"}):t(),u?e("vxe-table-loading",{props:{visible:h}}):t(),e("div",{class:[`vxe-table${l}-wrapper`],ref:"tableWrapper"},[a?e("vxe-table-filter",{props:{optimizeOpts:E,filterStore:I},ref:"filterWrapper"}):null,d?e("vxe-table-context-menu",{props:{ctxMenuStore:M},ref:"ctxWrapper"}):null,R.visible?e("div",{class:["vxe-table--tooltip-wrapper",`theme--${b.theme}`,`placement--${R.placement}`],style:R.style,ref:"tipWrapper"},[e("div",{class:["vxe-table--tooltip-content"]},p.formatText(R.content)),e("div",{class:["vxe-table--tooltip-arrow"],style:R.arrowStyle})]):null,z.visible?e("div",{class:["vxe-table--valid-error-wrapper",`placement--${z.placement}`],style:z.style,ref:"validWrapper"},[e("div",{class:["vxe-table--valid-error-content"]},p.formatText(z.rule.message)),e("div",{class:["vxe-table--valid-error-arrow"]})]):null])])},methods:{clearSort(){return this.tableFullColumn.forEach(e=>{e.order=null}),this.tableFullData=this.data||[],this.tableData=this.getTableData(!0).tableData,this.$nextTick()},clearFilter(e){return Object.assign(this.filterStore,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),this.$nextTick()},clearAll(){this.clearScroll(),this.clearSort(),this.clearFilter(),this.clearCurrentRow(),this.clearSelection(),this.clearRowExpand(),this.clearTreeExpand()},loadData(e,t){let{height:l,maxHeight:r,editStore:i,optimizeOpts:o,recalculate:s}=this,{scrollY:a}=o,c=e||[],d=a&&a.gt&&a.gt<c.length;if(i.insertList=[],i.removeList=[],this.tableSourceData=n.a.clone(c,!0),this.tableFullData=c,this.scrollYLoad=d,d&&!l&&!r)throw new Error("[vxe-table] The height/max-height must be set for the scroll load.");this.tableData=this.getTableData(!0).tableData,this.updateCacheMap(c,"fullData"),this.reserveCheckSelection(),this.checkSelectionStatus();let h=this.$nextTick();return t||(h=h.then(s)),h},reloadData(e){return this.clearAll(),this.loadData(e).then(this.handleDefaultExpand)},loadColumn(e){let t=n.a.mapTree(e,e=>Y.createColumn(this,e),this.headerProps);return this.collectColumn=t,this.tableFullColumn=p.getColumnList(t),this.customs&&this.mergeCustomColumn(this.customs),this.updateCacheMap(e,"fullColumn"),this.refreshColumn(),this.$nextTick()},reloadColumn(e){return this.clearAll(),this.loadColumn(e)},updateCacheMap(e,t){let l=this[`${t}IndexMap`],r=this[`${t}KeyMap`],i=p.getRowKey(this);l.clear(),r&&i?(r.clear(),e.forEach((e,t)=>{r.set(n.a.get(e,i),{rowKey:i,row:e,index:t}),l.set(e,{row:e,index:t})})):e.forEach((e,t)=>l.set(e,{row:e,index:t}))},getRowMapIndex(e){return this.fullDataIndexMap.has(e)?this.fullDataIndexMap.get(e).index:-1},getRowIndex(e){let{tableFullData:t,treeConfig:l}=this;return l?n.a.findTree(t,t=>t===e,l):this.getRowMapIndex(e)},getColumnMapIndex(e){return this.fullColumnIndexMap.has(e)?this.fullColumnIndexMap.get(e).index:-1},getColumnIndex(e){return this.getColumnMapIndex(e)},insert(e){return this.insertAt(e)},insertAt(e,t){let{tableData:l,editStore:r,defineProperty:i}=this;n.a.isArray(e)||(e=[e]);let o=e.map(e=>i(e));if(1===arguments.length)l.unshift.apply(l,o);else if(-1===t)l.push.apply(l,o);else{let e=l.indexOf(t);l.splice.apply(l,[e,0].concat(o))}return[].unshift.apply(r.insertList,o),this.checkSelectionStatus(),this.$nextTick().then(()=>{return this.recalculate(),{row:o.length?o[o.length-1]:null,rows:o}})},defineProperty(e){let t=Object.assign({},e),l=p.getRowKey(this);return this.visibleColumn.forEach(e=>{e.property&&!n.a.has(t,e.property)&&n.a.set(t,e.property,null),l&&!n.a.get(t,l)&&n.a.set(t,l,++_+Date.now())}),t},remove(e){let{tableData:t,tableFullData:l,editStore:r,treeConfig:i,selectConfig:o={},selection:s,hasRowInsert:a}=this,{removeList:c,insertList:d}=r,{checkProp:h}=o,u=[];return this.isUpdateData=!0,e&&(n.a.isArray(e)||(e=[e]),i?e.forEach(t=>{let r=n.a.findTree(l,e=>e===t,i);if(r){let{item:t,items:l,index:i}=r;a(t)||c.push(t);let o=l.splice(i,1)[0];h||n.a.remove(s,t=>e.indexOf(t)>-1),u.push(o)}}):(e.forEach(e=>{a(e)||c.push(e)}),u=n.a.remove(l,t=>e.indexOf(t)>-1),h||n.a.remove(s,t=>e.indexOf(t)>-1),n.a.remove(t,t=>e.indexOf(t)>-1)),n.a.remove(d,t=>e.indexOf(t)>-1)),this.checkSelectionStatus(),this.$nextTick().then(()=>{return this.recalculate(),{row:e&&e.length?e[e.length-1]:null,rows:u}})},removeSelecteds(){return this.remove(this.getSelectRecords()).then(e=>{return this.clearSelection(),e})},revert(e,t){let{tableSourceData:l,tableFullData:r}=this;return arguments.length?(e&&!n.a.isArray(e)&&(e=[e]),e.forEach(e=>{let i=r.indexOf(e),o=l[i];o&&e&&(t?n.a.set(e,t,n.a.get(o,t)):n.a.destructuring(e,o))}),this.$nextTick()):this.reloadData(l)},clearData(e,t){let{tableSourceData:l,visibleColumn:r}=this;return arguments.length?e&&!n.a.isArray(e)&&(e=[e]):e=l,t?e.forEach(e=>n.a.set(e,t,null)):e.forEach(e=>{r.forEach(t=>{t.property&&p.setCellValue(e,t,null)})}),this.$nextTick()},hasRowInsert(e){let{treeConfig:t,tableSourceData:l}=this;return t?n.a.findTree(l,t=>t===e,t):-1===this.getRowMapIndex(e)},hasRowChange(e,t){let l,{tableSourceData:r,treeConfig:i}=this,o=p.getRowKey(this);if(o||i){let t=n.a.get(e,o);if(i){let s=i.children,a=n.a.findTree(r,e=>t===n.a.get(e,o),i);e=Object.assign({},e,{[s]:null}),a&&(l=Object.assign({},a.item,{[s]:null}))}else l=r.find(e=>t===n.a.get(e,o))}else{let t=this.getRowMapIndex(e);l=r[t]}return arguments.length>1?l&&!n.a.isEqual(n.a.get(l,t),n.a.get(e,t)):l&&!n.a.isEqual(l,e)},getColumns(e){let t=this.visibleColumn;return arguments.length?t[e]:t},getRecords(e){let t=this.tableFullData;return arguments.length?t[e]:t},getAllRecords(){return{insertRecords:this.getInsertRecords(),removeRecords:this.getRemoveRecords(),updateRecords:this.getUpdateRecords()}},getInsertRecords(){return this.editStore.insertList},getRemoveRecords(){return this.editStore.removeList},getSelectRecords(){let{tableFullData:e,editStore:t,treeConfig:l,selectConfig:r={},selection:i}=this,{checkProp:o}=r,s=[],a=[];return o?(s=l?n.a.filterTree(e,e=>n.a.get(e,o),l):e.filter(e=>n.a.get(e,o)),a=t.insertList.filter(e=>n.a.get(e,o))):(s=l?n.a.filterTree(e,e=>i.indexOf(e)>-1,l):e.filter(e=>i.indexOf(e)>-1),a=t.insertList.filter(e=>i.indexOf(e)>-1)),s.concat(a)},getUpdateRecords(){let{tableFullData:e,hasRowChange:t,treeConfig:l}=this;return l?n.a.filterTree(e,e=>t(e)):e.filter(e=>t(e))},updateAfterFullData(){let{visibleColumn:e,tableFullData:t}=this,l=this.visibleColumn.find(e=>e.order),r=t,i=e.filter(({filters:e})=>e&&e.length);if(r=r.filter(e=>{return i.every(t=>{let{property:l,filters:r,filterMethod:i,remoteFilter:o}=t;if(r&&r.length){let s=[];if(r.forEach(e=>{e.checked&&s.push(e.value)}),s.length&&!o)return i?s.some(l=>i({value:l,row:e,column:t})):s.indexOf(n.a.get(e,l))>-1}return!0})}),l&&l.order){let e=n.a.sortBy(r,l.property);r="desc"===l.order?e.reverse():e}return this.afterFullData=r,r},getTableData(e){let{scrollYLoad:t,scrollYStore:l}=this,r=e?this.updateAfterFullData():this.afterFullData;return{fullData:r,tableData:t?r.slice(l.startIndex,l.startIndex+l.renderSize):r.slice(0)}},handleDefaultExpand(){this.selectConfig&&this.handleDefaultRowChecked(),this.expandConfig&&this.handleDefaultRowExpand(),this.treeConfig&&this.handleDefaultTreeExpand(),this.$nextTick(this.recalculate)},mergeCustomColumn(e){this.isUpdateCustoms=!0,this.tableFullColumn.forEach(t=>{let l=e.find(e=>t.property&&e.prop===t.property);t.visible=!l||!!l.visible}),this.$emit("update:customs",this.tableFullColumn)},reloadCustoms(e){return this.$nextTick().then(()=>{return this.mergeCustomColumn(e),this.refreshColumn().then(()=>this.tableFullColumn)})},refreshColumn(){let e,t=0,l=[],r=0,i=[],o=[],{headerProps:s,collectColumn:a,tableFullColumn:c,isGroup:d,columnStore:h,scrollXStore:u,optimizeOpts:p}=this,{scrollX:g}=p;d&&n.a.eachTree(a,e=>{e.children&&e.children.length&&(e.visible=!!n.a.findTree(e.children,e=>e.children&&e.children.length?0:e.visible,s))},s),c.filter(e=>e.visible).forEach((n,s)=>{"left"===n.fixed?(e||(s-t!==0?e=!0:t++),l.push(n)):"right"===n.fixed?(e||(r||(r=s),s-r!==0?e=!0:r++),o.push(n)):i.push(n)});let m=l.concat(i).concat(o),f=g&&g.gt&&g.gt<c.length;if(Object.assign(h,{leftList:l,centerList:i,rightList:o}),e&&d||r&&r!==m.length)throw new Error("[vxe-table] Fixed column must to the left and right sides.");return f&&(Object.assign(u,{startIndex:0,visibleIndex:0,renderSize:g.rSize,offsetSize:g.oSize}),m=m.slice(u.startIndex,u.startIndex+u.renderSize)),this.scrollXLoad=f,this.tableColumn=m,this.$nextTick().then(this.recalculate).then(this.recalculate)},analyColumnWidth(){let e=[],t=[],l=[],r=[],i=[],n=[];this.tableFullColumn.forEach(o=>{o.visible&&(o.resizeWidth?e.push(o):v.isPx(o.width)?t.push(o):v.isScale(o.width)?r.push(o):v.isPx(o.minWidth)?l.push(o):v.isScale(o.minWidth)?i.push(o):n.push(o))}),Object.assign(this.columnStore,{resizeList:e,pxList:t,pxMinList:l,scaleList:r,scaleMinList:i,autoList:n})},recalculate(e){let{tableBody:t,tableHeader:l,tableFooter:r}=this.$refs,i=t?t.$el:null,n=l?l.$el:null,o=r?r.$el:null;if(i){let t=i.clientWidth,l=this.autoCellWidth(n,i,o,t);if(!0===e)return this.$nextTick().then(()=>{t=i.clientWidth,t!==l&&this.autoCellWidth(n,i,o,t),this.computeScrollLoad()})}return this.$nextTick().then(this.computeScrollLoad)},autoCellWidth(e,t,l,r){let i,n=0,o=40,s=r,{$el:a,fit:c,columnStore:d}=this,{resizeList:h,pxMinList:u,pxList:p,scaleList:g,scaleMinList:m,autoList:f}=d;u.forEach(e=>{let t=parseInt(e.minWidth);n+=t,e.renderWidth=t}),i=s/100,m.forEach(e=>{let t=Math.floor(parseInt(e.minWidth)*i);n+=t,e.renderWidth=t}),g.forEach(e=>{let t=Math.floor(parseInt(e.width)*i);n+=t,e.renderWidth=t}),p.forEach(e=>{let t=parseInt(e.width);n+=t,e.renderWidth=t}),h.forEach(e=>{let t=parseInt(e.resizeWidth);n+=t,e.renderWidth=t}),s-=n,i=s>0?Math.max(Math.floor(s/(m.length+u.length+f.length)),o):o,c?s>0&&m.concat(u).forEach(e=>{n+=i,e.renderWidth+=i}):i=o,f.forEach((e,t)=>{if(e.renderWidth=i,n+=i,c&&t===f.length-1){let t=r-n;t>0&&(e.renderWidth+=t,n=r)}});let x=t.offsetHeight,v=t.offsetWidth-r;if(this.scrollYWidth=v,this.overflowY=v>0,this.tableWidth=n,this.tableHeight=x,this.containerHeight=a.parentNode.clientHeight,e&&(this.headerHeight=e.offsetHeight),l){let e=l.offsetHeight;this.scrollXHeight=Math.max(e-l.clientHeight,0),this.overflowX=n>l.clientWidth,this.footerHeight=e}else this.scrollXHeight=Math.max(x-t.clientHeight,0),this.overflowX=n>r;return this.overflowX&&this.checkScrolling(),n},checkScrolling(){let{tableBody:e,leftBody:t,rightBody:l}=this.$refs,r=e?e.$el:null;r&&(t&&(this.scrollLeftToRight=r.scrollLeft>0),l&&(this.scrollRightToLeft=r.clientWidth<r.scrollWidth-r.scrollLeft))},handleGlobalMousedownEvent(e){let{editStore:t,ctxMenuStore:l,editConfig:r={}}=this,{actived:i}=t;if(this.$refs.filterWrapper&&(v.getEventTargetNode(e,this.$el,"vxe-filter-wrapper").flag||v.getEventTargetNode(e,this.$refs.filterWrapper.$el).flag||this.closeFilter()),i.row&&!1!==r.autoClear&&(!this.lastCallTime||this.lastCallTime+50<Date.now())){let t=d.get("event.clear_actived");if(!t.some(t=>!1===t(i.args,e))){let t,l=!v.getEventTargetNode(e,this.$el,"col--edit").flag;if("row"===r.mode){let n=v.getEventTargetNode(e,this.$el,"vxe-body--row"),o=n.flag?n.targetElem!==i.args.cell.parentNode:0;t="manual"===r.trigger?o:o&&l}else t=l;!t&&v.getEventTargetNode(e,this.$el).flag||(this.clearValidate(),this.clearActived(e))}}l.visible&&this.$refs.ctxWrapper&&!v.getEventTargetNode(e,this.$refs.ctxWrapper.$el).flag&&this.closeContextMenu()},handleGlobalBlurEvent(e){this.closeFilter(),this.closeContextMenu()},handleGlobalMousewheelEvent(e){this.clostTooltip(),this.closeContextMenu()},handleGlobalKeydownEvent(e){let t,{isCtxMenu:l,ctxMenuStore:r,editStore:i,mouseConfig:n={},keyboardConfig:o={}}=this,{selected:s,actived:a}=i,c=e.keyCode,d=8===c,h=9===c,u=13===c,g=27===c,m=32===c,f=37===c,x=38===c,v=39===c,b=40===c,w=46===c,C=67===c,S=86===c,y=88===c,$=113===c,k=e.ctrlKey,E=f||x||v||b,T=l&&r.visible&&(u||m||E);g?(this.closeContextMenu(),this.closeFilter(),a.row&&(t=a.args,this.clearActived(e),n.selected&&this.handleSelected(t,e))):u&&(s.row||a.row)?this.moveSelected(s.row?s.args:a.args,f,x,v,!0,e):T?(e.preventDefault(),r.showChild&&p.hasChildrenList(r.selected)?this.moveCtxMenu(e,c,r,"selectChild",37,!1,r.selected.children):this.moveCtxMenu(e,c,r,"selected",39,!0,this.ctxMenuList)):$?s.row&&s.column&&this.handleActived(s.args,e):E&&o.isArrow?s.row&&s.column&&(e.preventDefault(),this.moveSelected(s.args,f,x,v,b,e)):h&&o.isTab?s.row||s.column?(e.preventDefault(),this.moveTabSelected(s.args,e)):(a.row||a.column)&&(e.preventDefault(),this.moveTabSelected(a.args,e)):w||d?o.isDel&&(s.row||s.column)&&(p.setCellValue(s.row,s.column,null),d&&this.handleActived(s.args,e)):o.isCut&&k&&(y||C||S)?y||C?this.handleCopyed(y,e):this.handlePaste(e):o.isEdit&&!k&&(c>=48&&c<=57||c>=65&&c<=90||c>=96&&c<=111||c>=186&&c<=192||c>=219&&c<=222||32===c)&&(s.row||s.column)&&(o.editMethod&&!1===o.editMethod(s.args,e)||(p.setCellValue(s.row,s.column,null),this.handleActived(s.args,e)))},moveTabSelected(e,t){let l,r,i,n,{tableData:o,visibleColumn:s,editConfig:a}=this,c=Object.assign({},e),d=o.indexOf(c.row),h=s.indexOf(c.column);for(let u=h+1;u<s.length;u++)if(s[u].editRender){n=u,i=s[u];break}if(!i&&d<o.length-1){r=d+1,l=o[r];for(let e=0;e<s.length;e++)if(s[e].editRender){n=e,i=s[e];break}}i&&(l?(c.rowIndex=r,c.row=l):c.rowIndex=d,c.columnIndex=n,c.column=i,c.cell=v.getCell(this,c),a&&("click"===a.trigger?this.handleActived(c,t):"dblclick"===a.trigger&&this.handleSelected(c,t)))},moveSelected(e,t,l,r,i,n){let{tableData:o,visibleColumn:s,handleSelected:a}=this,c=Object.assign({},e);if(l&&c.rowIndex)c.rowIndex-=1,c.row=o[c.rowIndex];else if(i&&c.rowIndex<o.length-1)c.rowIndex+=1,c.row=o[c.rowIndex];else if(t&&c.columnIndex){for(let d=c.columnIndex-1;d>=0;d--)if(s[d].editRender){c.columnIndex=d,c.column=s[d];break}}else if(r&&c.columnIndex)for(let d=c.columnIndex+1;d<s.length;d++)if(s[d].editRender){c.columnIndex=d,c.column=s[d];break}c.cell=v.getCell(this,c),a(c,n)},moveCtxMenu(e,t,l,r,i,o,s){let a=n.a.findIndexOf(s,e=>l[r]===e);t===i?o&&p.hasChildrenList(l.selected)?l.showChild=!0:(l.showChild=!1,l.selectChild=null):38===t?l[r]=s[a-1]||s[s.length-1]:40===t?l[r]=s[a+1]||s[0]:!l[r]||13!==t&&32!==t||this.ctxMenuLinkEvent(e,l[r])},handleGlobalResizeEvent(){this.recalculate()},handleGlobalContextmenuEvent(e){let{isCtxMenu:t}=this;if(t){let t=v.getEventTargetNode(e,this.$el,"vxe-table--header-wrapper");if(t.flag)return void this.openContextMenu(e,"header",{});let l=v.getEventTargetNode(e,this.$el,"vxe-table--body-wrapper");if(l.flag)return void this.openContextMenu(e,"body",{});let r=v.getEventTargetNode(e,this.$el,"vxe-table--footer-wrapper");if(r.flag)return void this.openContextMenu(e,"footer",{})}this.closeContextMenu(),this.closeFilter()},openContextMenu(e,t,l){let{tableData:r,visibleColumn:i,ctxMenuStore:n,ctxMenuConfig:o}=this,s=o[t];if(s){let{options:o,visibleMethod:a,disabled:c}=s;if(c)e.preventDefault();else if(o&&o.length)if(!a||a(l,e)){e.preventDefault();let{scrollTop:l,scrollLeft:s,visibleHeight:a,visibleWidth:c}=v.getDomNode(),{targetElem:d}=v.getEventTargetNode(e,this.$el,`vxe-${t}--column`),{rowIndex:h,columnIndex:u}=v.getCellIndexs(d),p=r[h],g=i[u],m=e.clientY+l,f=e.clientX+s;Object.assign(n,{args:{type:t,row:p,rowIndex:h,column:g,columnIndex:u,cell:d,$table:this},visible:!0,list:o,selected:null,selectChild:null,showChild:!1,style:{top:`${m}px`,left:`${f}px`}}),this.$nextTick(()=>{let t=this.$refs.ctxWrapper.$el,l=t.clientHeight,r=t.clientWidth,i=e.clientY+l-a,o=e.clientX+r-c;i>-10&&(n.style.top=`${m-l}px`),o>-10&&(n.style.left=`${f-r}px`)})}else this.closeContextMenu()}this.closeFilter()},closeContextMenu(){return Object.assign(this.ctxMenuStore,{list:[],visible:!1,selected:null,selectChild:null,showChild:!1}),this.$nextTick()},ctxMenuMouseoverEvent(e,t,l){let r=this.ctxMenuStore;e.preventDefault(),e.stopPropagation(),r.selected=t,r.selectChild=l,l||(r.showChild=p.hasChildrenList(t))},ctxMenuMouseoutEvent(e,t,l){let r=this.ctxMenuStore;t.children||(r.selected=null),r.selectChild=null},ctxMenuLinkEvent(e,t){t.disabled||t.children&&t.children.length||(p.emitEvent(this,"context-menu-click",[Object.assign({menu:t},this.ctxMenuStore.args),e]),this.closeContextMenu())},triggerHeaderTooltipEvent(e,{column:t}){let{tooltipStore:l}=this;l.column===t&&l.visible||this.showTooltip(e,t.origin.label,t)},triggerTooltipEvent(e,t){let{editConfig:l,editStore:r,tooltipStore:i}=this,{actived:n}=r,{row:o,column:s}=t;l&&("row"===l.mode&&n.row===o||n.row===o&&n.column===s)||i.column===s&&i.row===o&&i.visible||this.showTooltip(e,p.getCellLabel(o,s,t),s,o)},showTooltip(e,t,l,r){let i=e.currentTarget,n=i.children[0];if(t&&n.scrollWidth>n.clientWidth){let{tooltipStore:e,tooltipOpts:n,$refs:o}=this,{top:s,left:a}=v.getOffsetPos(i),{scrollTop:c,scrollLeft:d,visibleWidth:h}=v.getDomNode(),u=a;return Object.assign(e,{row:r,column:l,content:t,visible:!0,placement:"top",arrowStyle:{left:"50%"}}),this.$nextTick().then(()=>{let t=o.tipWrapper;if(t)return u=a+Math.floor((i.offsetWidth-t.offsetWidth)/2),e.style={zIndex:n.zIndex,width:`${t.offsetWidth+2}px`,top:`${s-t.offsetHeight-6}px`,left:`${u}px`},this.$nextTick()}).then(()=>{let t=o.tipWrapper;if(t){let l=t.offsetHeight,r=t.offsetWidth;s-l<c&&(e.placement="bottom",e.style.top=`${s+i.offsetHeight+6}px`),u<d+6?(u=d+6,e.arrowStyle.left=`${a>u+16?a-u+16:16}px`,e.style.left=`${u}px`):a+r>d+h&&(u=d+h-r-6,e.arrowStyle.left=`${r-Math.max(Math.floor((u+r-a)/2),22)}px`,e.style.left=`${u}px`)}})}return this.$nextTick()},clostTooltip(){return Object.assign(this.tooltipStore,{row:null,column:null,content:null,style:null,visible:!1,placement:null}),this.$nextTick()},handleDefaultRowChecked(){let{selectConfig:e={},tableFullData:t}=this,{checkAll:l,checkRowKeys:r}=e,i=p.getRowKey(this);if(l)this.setAllSelection(!0);else if(r){let e=i;if(!e)throw new Error("[vxe-table] Checked rows must have a unique primary key.");this.setSelection(r.map(l=>t.find(t=>l===t[e])),!0)}},setSelection(e,t){return e&&!n.a.isArray(e)&&(e=[e]),e.forEach(e=>this.triggerCheckRowEvent({},{row:e},!!t)),this.$nextTick()},triggerCheckRowEvent(e,{row:t},l){let{selection:r,tableFullData:i,selectConfig:o={},treeConfig:s,treeIndeterminates:a}=this,{checkProp:c,checkMethod:d}=o;if(!d||d({row:t,rowIndex:i.indexOf(t)})){if(c)if(s){-1===l?(a.push(t),n.a.set(t,c,!1)):(n.a.eachTree([t],e=>n.a.set(e,c,l),s),n.a.remove(a,e=>e===t));let r=n.a.findTree(i,e=>e===t,s);if(r&&r.parent){let t=r.items.filter(e=>n.a.get(e,c));return this.triggerCheckRowEvent(e,{row:r.parent},t.length===r.items.length||!(!t.length&&-1!==l)&&-1)}}else n.a.set(t,c,l);else if(s){-1===l?(a.push(t),n.a.remove(r,e=>e===t)):(n.a.eachTree([t],e=>{l?-1===r.indexOf(e)&&r.push(e):n.a.remove(r,t=>t===e)},s),n.a.remove(a,e=>e===t));let o=n.a.findTree(i,e=>e===t,s);if(o&&o.parent){let t=o.items.filter(e=>r.indexOf(e)>-1);return this.triggerCheckRowEvent(e,{row:o.parent},t.length===o.items.length||!(!t.length&&-1!==l)&&-1)}}else l?-1===r.indexOf(t)&&r.push(t):n.a.remove(r,e=>e===t);this.checkSelectionStatus(),p.emitEvent(this,"select-change",[{row:t,selection:this.getSelectRecords(),checked:l},e])}},checkSelectionStatus(){let{tableFullData:e,editStore:t,selectConfig:l={},selection:r,treeIndeterminates:i}=this,{checkProp:o,checkMethod:s}=l,{insertList:a}=t;a.length&&(e=e.concat(a)),o?(this.isAllSelected=e.length&&e.every(s?(e,t)=>!s({row:e,rowIndex:t})||n.a.get(e,o):e=>n.a.get(e,o)),this.isIndeterminate=!this.isAllSelected&&e.some(e=>n.a.get(e,o)||i.indexOf(e)>-1)):(this.isAllSelected=e.length&&e.every(s?(e,t)=>!s({row:e,rowIndex:t})||r.indexOf(e)>-1:e=>r.indexOf(e)>-1),this.isIndeterminate=!this.isAllSelected&&e.some(e=>i.indexOf(e)>-1||r.indexOf(e)>-1))},reserveCheckSelection(){let{selectConfig:e={},selection:t,fullDataKeyMap:l}=this,{reserve:r}=e,i=p.getRowKey(this);r&&t.length&&(this.selection=t.map(e=>{let t=n.a.get(e,i);return l.has(t)?l.get(t).row:e}))},toggleRowSelection(e){let{selectConfig:t={},selection:l}=this,{checkProp:r}=t;return this.triggerCheckRowEvent(null,{row:e},r?!n.a.get(e,r):-1===l.indexOf(e)),this.$nextTick()},setAllSelection(e){let{tableFullData:t,editStore:l,selectConfig:r={},treeConfig:i,selection:o}=this,{checkProp:s,reserve:a,checkMethod:c}=r,{insertList:d}=l,h=[];if(d.length&&(t=t.concat(d)),s){let l=(t,l)=>{c&&!c({row:t,rowIndex:l})||n.a.set(t,s,e)};i?n.a.eachTree(t,l,i):t.forEach(l)}else e&&(i?n.a.eachTree(t,(e,t)=>{c&&!c({row:e,rowIndex:t})||h.push(e)},i):h=c?t.filter((e,t)=>c({row:e,rowIndex:t})):t.slice(0));this.selection=e&&a?o.concat(h.filter(e=>-1===o.indexOf(e))):h,this.isAllSelected=e,this.isIndeterminate=!1,this.treeIndeterminates=[]},triggerCheckAllEvent(e,t){this.setAllSelection(t),p.emitEvent(this,"select-all",[{selection:this.getSelectRecords(),checked:t},e])},toggleAllSelection(){return this.triggerCheckAllEvent(null,!this.isAllSelected),this.$nextTick()},clearSelection(){let{tableFullData:e,selectConfig:t={},treeConfig:l}=this,{checkProp:r}=t;return r&&(l?n.a.eachTree(e,e=>n.a.set(e,r,!1),l):e.forEach(e=>n.a.set(e,r,!1))),this.isAllSelected=!1,this.isIndeterminate=!1,this.selection=[],this.treeIndeterminates=[],this.$nextTick()},triggerRowEvent(e,{row:t}){return this.selectRow=t,p.emitEvent(this,"select-change",[{row:t},e]),this.$nextTick()},setCurrentRow(e){return this.selectRow=e,this.$nextTick()},clearCurrentRow(){return this.selectRow=null,this.hoverRow=null,this.$nextTick()},triggerHoverEvent(e,{row:t}){this.hoverRow=t},triggerCellMousedownEvent(e,t){let{$el:l,tableData:r,visibleColumn:i,editStore:o,editConfig:s,handleSelected:a,handleChecked:c}=this,{checked:d,actived:h}=o,{row:u,column:p,cell:g}=t,{button:m}=e,f=0===m,x=2===m;if((f||x)&&s&&"dblclick"===s.trigger)if("row"===s.mode&&h.row===u||h.row===u&&h.column===p);else if(f){e.preventDefault(),e.stopPropagation(),this.handleSelected(t,e);let r=document.onmousemove,i=document.onmouseup,o=v.getCellIndexs(g),s=n.a.throttle(function(e){e.preventDefault();let{flag:t,targetElem:r}=v.getEventTargetNode(e,l,"vxe-body--column");t&&c(o,v.getCellIndexs(r),e)},v.browse.msie?80:40,{leading:!0,trailing:!0});document.onmousemove=s,document.onmouseup=function(e){document.onmousemove=r,document.onmouseup=i},this.closeFilter(),this.closeContextMenu()}else{let l=v.getCellIndexs(g);-1!==d.rows.indexOf(r[l.rowIndex])&&-1!==d.columns.indexOf(i[l.columnIndex])||a(t,e)}},triggerCornerMousedownEvent(e,t){t.preventDefault(),t.stopPropagation();let{$el:l,tableData:r,visibleColumn:i,editStore:o,editConfig:s,handleTempChecked:a}=this,{checked:c}=o,{button:d}=t,h=0===d,u=2===d;if((h||u)&&s&&c.rows.length&&"dblclick"===s.trigger){let e=document.onmousemove,t=document.onmouseup,o={rowIndex:r.indexOf(c.rows[0]),columnIndex:i.indexOf(c.columns[0])},s=n.a.throttle(function(e){e.preventDefault();let{flag:t,targetElem:r}=v.getEventTargetNode(e,l,"vxe-body--column");t&&a(o,v.getCellIndexs(r),e)},v.browse.msie?80:40,{leading:!0,trailing:!0});document.onmousemove=s,document.onmouseup=function(l){document.onmousemove=e,document.onmouseup=t,c.rows=c.tRows,c.columns=c.tColumns}}},triggerCellClickEvent(e,t){let{$el:l,highlightCurrentRow:r,editStore:i,treeConfig:n,editConfig:o}=this,{actived:s}=i,{column:a,columnIndex:c}=t;r&&(v.getEventTargetNode(e,l,"vxe-tree-wrapper").flag||(this.selectRow=t.row)),n&&("row"===n.trigger||a.treeNode&&"cell"===n.trigger)&&this.triggerTreeExpandEvent(e,t),o&&("click"===o.trigger?s.args&&e.currentTarget===s.args.cell||("row"===o.mode?this.triggerValidate("blur").then(()=>{}).catch(e=>e).then(()=>{this.handleActived(t,e).then(()=>this.triggerValidate("change")).catch(e=>e)}):"cell"===o.mode&&this.handleActived(t,e).then(()=>this.triggerValidate("change")).catch(e=>e)):s.row&&(s.args.column=a,s.args.columnIndex=c)),p.emitEvent(this,"cell-click",[t,e])},triggerCellDBLClickEvent(e,t){let{editStore:l,editConfig:r}=this,{actived:i}=l;r&&"dblclick"===r.trigger&&(i.args&&e.currentTarget===i.args.cell||this.handleActived(t,e)),p.emitEvent(this,"cell-dblclick",[t,e])},handleActived(e,t){let{editStore:l,editConfig:r}=this,{activeMethod:i}=r,{actived:n}=l,{row:o,column:s,cell:a}=e,{editRender:c}=s;return c&&(("row"===r.mode?n.row!==o:n.row!==o||n.column!==s)?!i||i(e)?(this.clostTooltip(),this.clearValidate(),this.clearCopyed(t),this.clearChecked(t),this.clearSelected(t),this.clearActived(t),s.renderHeight=a.offsetHeight,n.args=e,n.row=o,n.column=s,this.$nextTick(()=>{this.handleFocus(e,t)}),p.emitEvent(this,"edit-actived",[e,t])):p.emitEvent(this,"edit-disabled",[e,t]):(s.renderHeight=a.offsetHeight,n.args=e,setTimeout(()=>{this.handleFocus(e,t)}))),this.$nextTick()},clearActived(e){let{editStore:t}=this,{actived:l}=t;return(l.row||l.column)&&p.emitEvent(this,"edit-closed",[l.args,e]),l.args=null,l.row=null,l.column=null,this.$nextTick()},hasActiveRow(e){let{editStore:t}=this,{actived:l}=t;return l.row===e},clearSelected(e){let{editStore:t}=this,{selected:l}=t;return l.row=null,l.column=null,this.$nextTick()},handleSelected(e,t){let{mouseConfig:l={},editStore:r}=this,{selected:i}=r,{row:n,column:o}=e,s=()=>{if(i.row===n&&i.column===o||(this.clearChecked(t),this.clearActived(t),i.args=e,i.row=n,i.column=o),l.checked){let l=v.getCellIndexs(e.cell);this.handleChecked(l,l,t)}return this.$nextTick()};return s()},clearChecked(e){let{editStore:t}=this,{checked:l}=t;return l.rows=[],l.columns=[],l.tRows=[],l.tColumns=[],this.$nextTick()},handleChecked(e,t,l){let{tableData:r,visibleColumn:i,editStore:n}=this,{checked:o}=n,{rowIndex:s,columnIndex:a}=e,{rowIndex:c,columnIndex:d}=t;o.tRows=[],o.tColumns=[],o.rows=s<c?r.slice(s,c+1):r.slice(c,s+1),o.columns=a<d?i.slice(Math.max(a,1),d+1):i.slice(Math.max(d,1),a+1)},handleTempChecked(e,t,l){let{tableData:r,visibleColumn:i,editStore:n}=this,{checked:o}=n,{rows:s,tRows:a,columns:c,tColumns:d}=o,{rowIndex:h,columnIndex:u}=e,{rowIndex:p,columnIndex:g}=t;a.length>s.length?g=i.indexOf(c[c.length-1]):d.length>c.length&&(p=r.indexOf(s[s.length-1])),h<p?o.tRows=r.slice(h,p+1):(h+=s.length,o.tRows=r.slice(p,h)),u<g?o.tColumns=i.slice(Math.max(u,1),g+1):(u+=c.length,o.tColumns=i.slice(Math.max(g,1),u))},clearCopyed(){let{editStore:e}=this,{copyed:t}=e;return t.cut=!1,t.rows=[],t.columns=[],this.$nextTick()},handleCopyed(e,t){let{editStore:l}=this,{copyed:r,checked:i}=l;r.cut=e,r.rows=i.rows,r.columns=i.columns},handlePaste(e){let{tableData:t,visibleColumn:l,editStore:r}=this,{copyed:i,selected:n}=r,{cut:o,rows:s,columns:a}=i;if(s.length&&a.length&&n.row&&n.column){let{rowIndex:r,columnIndex:i}=n.args,c={rowIndex:r,columnIndex:i},d={rowIndex:r+s.length-1,columnIndex:i+a.length-1};s.forEach((e,n)=>{let s=t[r+n];s&&a.forEach((t,r)=>{let n=l[i+r];n&&p.setCellValue(s,n,p.getCellValue(e,t)),o&&p.setCellValue(e,t,null)})}),o&&this.clearCopyed(),this.handleChecked(c,d,e)}},handleFocus(e,t){let{column:l,cell:r}=e,{editRender:i}=l;if(i){let e,t=H.get(i.name);i.autofocus&&(e=r.querySelector(i.autofocus)),!e&&t&&t.autofocus&&(e=r.querySelector(t.autofocus)),e&&e.focus()}},setActiveRow(e){return this.setActiveCell(e,this.visibleColumn.find(e=>e.editRender).property)},setActiveCell(e,t){let{tableData:l,visibleColumn:r,handleActived:i}=this;if(e&&t){let n=l.indexOf(e);if(n>-1){let l=r.find(e=>e.property===t),o=v.getCell(this,{row:e,rowIndex:n,column:l});i({row:e,column:l,cell:o}),this.lastCallTime=Date.now()}}return this.$nextTick()},setSelectCell(e,t){let{tableData:l,editConfig:r,visibleColumn:i}=this;if(e&&t&&"manual"!==r.trigger){let r=i.find(e=>e.property===t),n=l.indexOf(e);if(n>-1&&r){let t=v.getCell(this,{row:e,rowIndex:n,column:r}),l={row:e,rowIndex:n,column:r,columnIndex:i.indexOf(r),cell:t};this.handleSelected(l,{})}}return this.$nextTick()},triggerSortEvent(e,t,l,r){this.sort(t.property,r)},sort(e,t){let{visibleColumn:l,tableFullColumn:r}=this,i=l.find(t=>t.property===e);return t&&i.order!==t&&(r.forEach(e=>{e.order=null}),i.order=t,i.remoteSort||(this.tableData=this.getTableData(!0).tableData),p.emitEvent(this,"sort-change",[{column:i,prop:e,order:t}])),this.$nextTick()},triggerFilterEvent(e,t,l){let{$refs:r,filterStore:i,overflowX:n}=this;if(i.column===t&&i.visible)i.visible=!1;else{let l=e.target,o=r.tableBody.$el,s=r.filterWrapper,{top:a,left:c}=v.getOffsetPos(l);n&&(c-=o.scrollLeft),Object.assign(i,{multiple:t.filterMultiple,options:t.filters,column:t,style:{top:`${a+l.clientHeight+6}px`,left:`${c}px`},visible:!0}),i.isAllSelected=i.options.every(e=>e.checked),i.isIndeterminate=!this.isAllSelected&&i.options.some(e=>e.checked),this.$nextTick(()=>{i.style={top:`${a+l.clientHeight+6}px`,left:`${c-s.$el.clientWidth/2+10}px`}})}},confirmFilterEvent(e){let{filterStore:t,scrollXLoad:l,scrollYLoad:r}=this,{column:i}=t,n=[];i.filters.forEach(e=>{e.checked&&n.push(e.value)}),t.visible=!1,l||r?this.clearScroll():(i.remoteFilter||(this.tableData=this.getTableData(!0).tableData),p.emitEvent(this,"filter-change",[{column:i,prop:i.property,values:n}])),this.closeFilter(),this.$nextTick(this.recalculate)},closeFilter(e){return Object.assign(this.filterStore,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),this.$nextTick()},resetFilterEvent(e){this.filterStore.options.forEach(e=>{e.checked=!1}),this.confirmFilterEvent(e)},triggerRowExpandEvent(e,{row:t}){let l=this.toggleRowExpansion(t);return p.emitEvent(this,"toggle-expand-change",[{row:t,rowIndex:this.getRowMapIndex(t),$table:this},e]),l},toggleRowExpansion(e){return this.setRowExpansion(e)},handleDefaultRowExpand(){let{expandConfig:e={},tableFullData:t}=this,{expandAll:l,expandRowKeys:r}=e,i=p.getRowKey(this);if(l)this.expandeds=t.slice(0);else if(r){let e=i;if(!e)throw new Error("[vxe-table] Expand rows must have a unique primary key.");this.expandeds=r.map(l=>t.find(t=>l===t[e]))}},setAllRowExpansion(e){return this.expandeds=e?this.tableFullData.slice(0):[],this.$nextTick()},setRowExpansion(e,t){let{expandeds:l,expandConfig:r={}}=this,i=1===arguments.length;return e&&(n.a.isArray(e)||(e=[e]),r.accordion&&(l.length=0,e=e.slice(e.length-1,e.length)),e.forEach(e=>{let r=l.indexOf(e);r>-1?!i&&t||l.splice(r,1):(i||t)&&l.push(e)})),this.$nextTick()},clearRowExpand(){return this.expandeds=[],this.$nextTick()},triggerTreeExpandEvent(e,{row:t}){let l=this.toggleTreeExpansion(t);return p.emitEvent(this,"toggle-tree-change",[{row:t,rowIndex:this.getRowMapIndex(t),$table:this},e]),l},toggleTreeExpansion(e){return this.setTreeExpansion(e)},handleDefaultTreeExpand(){let{rowKey:e,treeConfig:t,tableFullData:l}=this;if(t){let{key:r,expandAll:i,expandRowKeys:o}=t,{children:s}=t,a=e||r,c=[];i?(n.a.filterTree(l,e=>{let t=e[s];t&&t.length&&c.push(e)},t),this.treeExpandeds=c):o&&(o.forEach(e=>{let r=n.a.findTree(l,t=>e===t[a],t),i=r?r.item[s]:0;i&&i.length&&c.push(r.item)}),this.treeExpandeds=c)}},setAllTreeExpansion(e){let{tableFullData:t,treeConfig:l}=this,{children:r}=l,i=[];return e&&n.a.eachTree(t,e=>{let t=e[r];t&&t.length&&i.push(e)},l),this.treeExpandeds=i,this.$nextTick()},setTreeExpansion(e,t){let{tableFullData:l,treeExpandeds:r,treeConfig:i}=this,{children:o}=i,s=1===arguments.length;return e&&(n.a.isArray(e)||(e=[e]),i.accordion&&(e=e.slice(e.length-1,e.length)),e.forEach(e=>{let a=e[o];if(a&&a.length){let o=r.indexOf(e);if(i.accordion){let t=n.a.findTree(l,t=>t===e,i);n.a.remove(r,e=>t.items.indexOf(e)>-1)}o>-1?!s&&t||r.splice(o,1):(s||t)&&r.push(e)}})),this.$nextTick()},clearTreeExpand(){return this.treeExpandeds=[],this.$nextTick()},isScrollXLoad(){return this.scrollXLoad},isScrollYLoad(){return this.scrollYLoad},triggerScrollXEvent(e){let{$refs:t,visibleColumn:l,scrollXStore:r}=this,{startIndex:i,renderSize:n,offsetSize:o,visibleSize:s}=r,a=t.tableBody.$el,c=a.scrollLeft,d=0,h=0;for(let u=0;u<l.length;u++)if(h+=l[u].renderWidth,c<h){d=u;break}if(r.visibleIndex!==d){let e,t=0,h=r.visibleIndex>d,u=n<3*s,p=n-s;h?(t=p-(u?Math.floor(p/2):Math.floor(n>6*s?3*s:1.5*s)),e=d-o<=i):(t=u?Math.floor(p/2):Math.floor(n>6*s?3*s:1.5*s),e=d+s+o>=i+n),e&&(r.visibleIndex=d,r.startIndex=Math.min(Math.max(d-t,0),l.length-n),this.updateScrollXSpace(),this.$nextTick(()=>{a.scrollLeft=c}))}this.clostTooltip()},triggerScrollYEvent:n.a.debounce(function(e){let{tableFullData:t,scrollYStore:l}=this,{startIndex:r,renderSize:i,offsetSize:n,visibleSize:o,rowHeight:s}=l,a=e.target,c=a.scrollTop,d=Math.ceil(c/s);if(l.visibleIndex!==d){let e,s=0,h=l.visibleIndex>d,u=i<3*o,p=i-o;h?(s=p-(u?Math.floor(p/2):Math.floor(i>6*o?3*o:1.5*o)),e=d-n<=r):(s=u?Math.floor(p/2):Math.floor(i>6*o?3*o:1.5*o),e=d+o+n>=r+i),e&&(l.visibleIndex=d,l.startIndex=Math.min(Math.max(d-s,0),t.length-i),this.updateScrollYSpace(),this.$nextTick(()=>{a.scrollTop=c}))}},v.browse.msie?40:20,{leading:!1,trailing:!0}),computeScrollLoad(){let{scrollXLoad:e,scrollYLoad:t,scrollYStore:l,scrollXStore:r,visibleColumn:i,optimizeOpts:n}=this,{scrollX:o,scrollY:s}=n,a=this.$refs.tableBody,c=a?a.$el:null,d=this.$refs.tableHeader;if(c&&(e&&(r.visibleSize=o.vSize||Math.ceil(c.clientWidth/(i.slice(0,10).reduce((e,t)=>e+t.renderWidth,0)/10)),this.updateScrollXSpace()),t)){if(s.rHeight)l.rowHeight=s.rHeight;else{let e=c.querySelector("tbody>tr");!e&&d&&(e=d.$el.querySelector("thead>tr")),e&&(l.rowHeight=e.clientHeight)}l.visibleSize=s.vSize||Math.ceil(c.clientHeight/l.rowHeight),this.updateScrollYSpace()}},updateScrollXSpace(){let{visibleColumn:e,scrollXStore:t}=this;this.tableColumn=e.slice(t.startIndex,t.startIndex+t.renderSize),t.leftSpaceWidth=e.slice(0,t.startIndex).reduce((e,t)=>e+t.renderWidth,0),t.rightSpaceWidth=e.slice(t.startIndex+t.renderSize,e.length).reduce((e,t)=>e+t.renderWidth,0)},updateScrollYSpace(){let{scrollYStore:e}=this,{fullData:t,tableData:l}=this.getTableData();this.tableData=l,e.topSpaceHeight=Math.max(e.startIndex*e.rowHeight,0),e.bottomSpaceHeight=Math.max((t.length-(e.startIndex+e.renderSize))*e.rowHeight,0)},clearScroll(){return Object.assign(this.scrollXStore,{visibleSize:0,startIndex:0,leftSpaceWidth:0,rightSpaceWidth:0}),Object.assign(this.scrollYStore,{visibleSize:0,startIndex:0,topSpaceHeight:0,bottomSpaceHeight:0}),this.$nextTick(()=>{let e=this.$refs.tableBody,t=e?e.$el:null,l=this.$refs.tableFooter,r=l?l.$el:null;t&&(t.scrollTop=0,t.scrollLeft=0),r&&(r.scrollLeft=0)}),this.$nextTick()},updateStatus(e){return this.$nextTick().then(()=>{let{$refs:t,tableData:l,editRules:r}=this;if(e&&t.tableBody&&!n.a.isEmpty(r)){let{row:t,column:r}=e,i="change";if(this.hasCellRules(i,t,r)){let e=l.indexOf(t),n=v.getCell(this,{row:t,rowIndex:e,column:r});if(n)return this.validCellRules(i,t,r).then(()=>this.clearValidate()).catch(e=>this.openValidTooltip({rule:e,row:t,column:r,cell:n}))}}})},triggerValidate(e){let{editConfig:t,editStore:l,editRules:r,validStore:i}=this,{actived:n}=l;if(n.row&&r){let{row:l,column:r,cell:o}=n.args;if(this.hasCellRules(e,l,r))return this.validCellRules(e,l,r).then(()=>{"row"===t.mode&&i.visible&&i.row===l&&i.column===r&&this.clearValidate()}).catch(t=>{if(!t.trigger||e===t.trigger){let e={rule:t,row:l,column:r,cell:o};return this.openValidTooltip(e),Promise.reject(e)}return Promise.resolve()})}return Promise.resolve()},validate(e,t){let{editRules:l,tableData:r}=this,i=r;e&&arguments.length&&(n.a.isFunction(e)?t=e:i=n.a.isArray(e)?e:[e]);let o=Promise.resolve(!0);if(this.lastCallTime=Date.now(),this.clearValidate(),!n.a.isEmpty(l)){let e=this.getColumns();return i.forEach(t=>{let i=r.indexOf(t);e.forEach((e,r)=>{n.a.has(l,e.property)&&(o=o.then(()=>new Promise((l,n)=>{this.validCellRules("all",t,e).then(l).catch(l=>{let o={rule:l,rowIndex:i,row:t,columnIndex:r,column:e,cell:v.getCell(this,{row:t,rowIndex:i,column:e})};return n(o)})})))})}),o.then(()=>{let e=!0;return t&&t(e),!0}).catch(e=>{let l=!1,{rule:r,column:i}=e;return this.handleValidError(e),t&&t(l,{[i.property]:[new Error(r.message)]}),t?Promise.resolve(l):Promise.reject(l)})}{let e=!0;t&&t(e)}return o},hasCellRules(e,t,l){let{editRules:r}=this,{property:i}=l;if(i&&!n.a.isEmpty(r)){let t=n.a.get(r,i);return t&&t.find(t=>"all"===e||!t.trigger||e===t.trigger)}return!1},validCellRules(e,t,l){let{editRules:r}=this,{property:i}=l,o=Promise.resolve();if(i&&!n.a.isEmpty(r)){let s=n.a.get(r,i),a=n.a.get(t,i);if(s)for(let r=0;r<s.length;r++)o=o.then(()=>new Promise((i,o)=>{let c=s[r],d=!0===c.required;if("all"!==e&&c.trigger&&e!==c.trigger||!(d||a||c.validator))i();else if(n.a.isFunction(c.validator))c.validator(c,a,e=>{if(n.a.isError(e)){let t={type:"custom",trigger:c.trigger,message:e.message,rule:c};return o(t)}return i()},{rules:s,row:t,column:l,rowIndex:this.getRowMapIndex(t),columnIndex:this.getColumnMapIndex(l)});else{let e,t="number"===c.type,l=null===a||void 0===a||""===a;e=t?n.a.toNumber(a):l?"":""+a,d&&l?o(c):a&&(t&&isNaN(a)||n.a.isRegExp(c.pattern)&&!c.pattern.test(a)||n.a.isNumber(c.min)&&(t?e<c.min:e.length<c.min)||n.a.isNumber(c.max)&&(t?e>c.max:e.length>c.max))?o(c):i()}}))}return o},clearValidate(){return Object.assign(this.validStore,{visible:!1,row:null,column:null,rule:null,style:null,placement:null}),this.$nextTick()},handleValidError(e){this.handleActived(e,{type:"valid-error",trigger:"call"}).then(()=>this.openValidTooltip(e))},openValidTooltip(e){let{$refs:t,tooltipOpts:l,validStore:r}=this,{rule:i,row:n,column:o,cell:s}=e;this.$nextTick(()=>{let{top:a,left:c}=v.getOffsetPos(s),{scrollTop:d,scrollLeft:h,visibleWidth:u,visibleHeight:g}=v.getDomNode();Object.assign(r,{row:n,column:o,rule:i,visible:!0,placement:"bottom"}),this.$nextTick().then(()=>{let e=t.validWrapper;if(e)return r.style={zIndex:l.zIndex,top:`${a+s.offsetHeight}px`,left:`${c+Math.floor((s.offsetWidth-e.offsetWidth)/2)}px`},this.$nextTick()}).then(()=>{let e=t.validWrapper;if(e){let t=e.offsetHeight,l=e.offsetWidth;a+s.offsetHeight+t>d+g&&(r.placement="top",r.style.top=`${a-t}px`),c+l>h+u&&(r.style.left=`${h+u-l-6}px`)}}),p.emitEvent(this,"valid-error",[e])})},exportCsv(e){let{visibleColumn:t,scrollXLoad:l,scrollYLoad:r,treeConfig:i}=this,o=Object.assign({filename:"table.csv",original:!!i,isHeader:!0,download:!0,data:null,columns:null,columnFilterMethod:e=>-1===["index","selection","radio"].indexOf(e.type)&&e.property,dataFilterMethod:null},e);-1===o.filename.indexOf(".csv")&&(o.filename+=".csv"),(l||r)&&(o.original=!0);let s=t,a=this.getTableData().fullData;return i&&(a=n.a.toTreeArray(a,i)),C.downloadCsc(o,C.getCsvContent(o,a,s,this.$el))}},install:function(e){e.component(G.name,G)}};const U=G;var J=G,Q={name:"VxeTableColumn",props:{type:String,prop:String,label:String,width:[Number,String],minWidth:[Number,String],resizable:{type:Boolean,default:null},fixed:String,align:String,headerAlign:String,showOverflow:[Boolean,String],showHeaderOverflow:[Boolean,String],formatter:Function,indexMethod:Function,sortable:Boolean,remoteSort:Boolean,sortBy:[String,Array],filters:Array,filterMultiple:{type:Boolean,default:!0},filterMethod:Function,remoteFilter:Boolean,treeNode:Boolean,columnKey:[String,Number],editRender:Object},inject:["$table"],created(){this.columnConfig=this.createColumn(this.$table,this)},mounted(){p.assemColumn(this)},destroyed(){p.destroyColumn(this)},render(e){return e("div",this.$slots.default)},methods:Y,install:function(e){e.component(Q.name,Q)}};const Z=Q;var ee=Q;const te=e=>{const t=[];return e.forEach(e=>{e.visible&&(e.children&&e.children.length&&e.children.some(e=>e.visible)?(t.push(e),t.push.apply(t,te(e.children))):t.push(e))}),t},le=e=>{let t=1;const l=(e,r)=>{if(r&&(e.level=r.level+1,t<e.level&&(t=e.level)),e.children&&e.children.length&&e.children.some(e=>e.visible)){let t=0;e.children.forEach(r=>{r.visible&&(l(r,e),t+=r.colSpan)}),e.colSpan=t}else e.colSpan=1};e.forEach(e=>{e.level=1,l(e)});const r=[];for(let n=0;n<t;n++)r.push([]);const i=te(e);return i.forEach(e=>{e.children&&e.children.length&&e.children.some(e=>e.visible)?e.rowSpan=1:e.rowSpan=t-e.level+1,r[e.level-1].push(e)}),r};var re={name:"VxeTableHeader",props:{tableData:Array,tableColumn:Array,visibleColumn:Array,collectColumn:Array,fixedColumn:Array,size:String,fixedType:String,isGroup:Boolean},data(){return{headerColumn:[]}},watch:{tableColumn(){this.uploadColumn()}},created(){this.uploadColumn()},render(e){let{$parent:t,fixedType:l,headerColumn:r,tableColumn:i,resizeMousedown:o,fixedColumn:s}=this,{$listeners:a,resizable:c,border:d,headerRowClassName:h,headerCellClassName:u,showHeaderAllOverflow:g,tableWidth:m,scrollXLoad:f,scrollXStore:x,scrollYWidth:v,getColumnMapIndex:b}=t;return f&&(l&&(i=s),m=i.reduce((e,t)=>e+t.renderWidth,0)),e("div",{class:["vxe-table--header-wrapper",l?`fixed--${l}-wrapper`:"body--wrapper"]},[!l&&f?e("div",{class:["vxe-body--x-space"],style:{width:`${t.tableWidth+v}px`}}):null,e("table",{attrs:{cellspacing:0,cellpadding:0,border:0},style:{width:null===m?m:`${m+v}px`,"margin-left":l?null:`${x.leftSpaceWidth}px`}},[e("colgroup",i.map((t,l)=>{return e("col",{attrs:{name:t.id,width:t.renderWidth},key:l})}).concat([e("col",{attrs:{width:v}})])),e("thead",r.map((r,i)=>{return e("tr",{class:["vxe-header--row",h?n.a.isFunction(h)?h({$table:t,$rowIndex:i,fixed:l}):h:""]},r.map((r,s)=>{let{columnKey:h,showHeaderOverflow:m,headerAlign:f,renderWidth:x}=r,v=r.children&&r.children.length,w=l&&r.fixed!==l&&!v,C="ellipsis"===(m||g),S="title"===(m||g),y=!0===m||"tooltip"===m||!0===g||"tooltip"===g,$={},k=b(r);return y&&($.mouseover=e=>{t.triggerHeaderTooltipEvent(e,{$table:t,column:r,columnIndex:k,fixed:l})},$.mouseout=t.clostTooltip),a["header-cell-click"]&&($.click=e=>{p.emitEvent(t,"header-cell-click",[{$table:t,$rowIndex:i,column:r,columnIndex:k,$columnIndex:s,fixed:l,cell:e.currentTarget},e])}),a["header-cell-dblclick"]&&($.dblclick=e=>{p.emitEvent(t,"header-cell-dblclick",[{$table:t,$rowIndex:i,column:r,columnIndex:k,$columnIndex:s,fixed:l,cell:e.currentTarget},e])}),e("th",{class:["vxe-header--column",r.id,{[`col--${f}`]:f,"fixed--hidden":w,"filter--active":r.filters.some(e=>e.checked)},u?n.a.isFunction(u)?u({$table:t,$rowIndex:i,column:r,columnIndex:k,$columnIndex:s,fixed:l}):u:""],attrs:{colspan:r.colSpan,rowspan:r.rowSpan},on:$,key:h||(v?r.id:k)},[e("div",{class:["vxe-cell",{"c--title":S,"c--tooltip":y,"c--ellipsis":C}],attrs:{title:S?r.origin.label:null},style:{width:S||y||C?`${d?x-1:x}px`:null}},r.renderHeader(e,{$table:t,column:r,columnIndex:k,fixed:l,isHidden:w})),d&&(n.a.isBoolean(r.resizable)?r.resizable:c)&&!l&&!v?e("div",{class:["vxe-resizable"],on:{mousedown:e=>{o(e,r)}}}):null])}).concat(v?[e("th",{class:["col--gutter"],style:{width:`${v}px`}})]:[]))}))]),e("div",{class:["vxe-table--repair"],style:{width:null===m?m:`${m}px`}})])},methods:{uploadColumn(){this.headerColumn=this.isGroup?le(this.collectColumn):[this.$parent.scrollXLoad&&this.fixedType?this.fixedColumn:this.tableColumn]},resizeMousedown(e,t){let{$parent:l,$el:r}=this,i=e.target,n=0,o=l.$refs.tableBody.$el,s=l.$refs.resizeBar,a=v.getOffsetPos(i,r),c=a.left-i.parentNode.clientWidth+i.clientWidth+36,d=a.left+6,h=e.clientX,u=document.onmousemove,p=document.onmouseup,g=function(e){e.preventDefault();let t=e.clientX-h,l=d+t;n=l<c?c:l,s.style.left=`${n-o.scrollLeft}px`};s.style.display="block",document.onmousemove=g,document.onmouseup=function(e){document.onmousemove=u,document.onmouseup=p,t.resizeWidth=t.renderWidth-(d-n),s.style.display="none",l.analyColumnWidth(),l.recalculate()},g(e)}},install:function(e){e.component(re.name,re)}};const ie=re;var ne,oe,se=re;function ae(e,t,l,r,i){let n=t.indexOf(r),o=l.indexOf(i);e.active=n>-1&&o>-1,e.top=0===n&&o>-1,e.bottom=n===t.length-1&&o>-1,e.left=n>-1&&0===o,e.right=n>-1&&o===l.length-1}function ce(e,t,l,r,i,o,s,a,c,d,h,u){let g,m,{$listeners:f,tableData:x,overflowX:v,scrollXLoad:b,scrollYLoad:w,border:C,highlightCurrentRow:S,showAllOverflow:y,cellClassName:$,spanMethod:k,keyboardConfig:E,treeConfig:T,mouseConfig:I,editConfig:M,editStore:R,validStore:z}=l,{editRender:O,align:D,showOverflow:P,renderWidth:L,columnKey:H}=d,{checked:A,selected:F,actived:W,copyed:j}=R,N=I&&I.selected,B=I&&I.checked,V=E&&E.isCut,X=i?d.fixed!==i:d.fixed&&v,q="ellipsis"===(P||y),Y="title"===(P||y),_=!0===P||"tooltip"===P||!0===y||"tooltip"===y,K=Y||_||q,G={},U={},J={},Q={},Z=O&&M&&"dblclick"===M.trigger,ee={$table:l,seq:r,row:s,rowIndex:a,$rowIndex:c,column:d,columnIndex:h,$columnIndex:u,fixed:i,level:o,isHidden:X,data:x};if(!b&&!w||K||(q=K=!0),(_||f["cell-mouseenter"])&&(G.mouseenter=e=>{let t={$table:l,seq:r,row:s,rowIndex:a,$rowIndex:c,column:d,columnIndex:h,$columnIndex:u,fixed:i,level:o,cell:e.currentTarget};_&&l.triggerTooltipEvent(e,t),p.emitEvent(l,"cell-mouseenter",[t,e])}),(_||f["cell-mouseleave"])&&(G.mouseleave=e=>{l.clostTooltip(),p.emitEvent(l,"cell-mouseleave",[{$table:l,seq:r,row:s,rowIndex:a,$rowIndex:c,column:d,columnIndex:h,$columnIndex:u,fixed:i,level:o,cell:e.currentTarget},e])}),G.mousedown=e=>{l.triggerCellMousedownEvent(e,{$table:l,seq:r,row:s,rowIndex:a,$rowIndex:c,column:d,columnIndex:h,$columnIndex:u,fixed:i,level:o,cell:e.currentTarget})},(S||f["cell-click"]||O&&M||T&&("row"===T.trigger||d.treeNode&&"cell"===T.trigger))&&(G.click=e=>{l.triggerCellClickEvent(e,{$table:l,row:s,rowIndex:a,$rowIndex:c,column:d,columnIndex:h,$columnIndex:u,fixed:i,level:o,cell:e.currentTarget})}),(Z||f["cell-dblclick"])&&(G.dblclick=e=>{l.triggerCellDBLClickEvent(e,{$table:l,seq:r,row:s,rowIndex:a,$rowIndex:c,column:d,columnIndex:h,$columnIndex:u,fixed:i,level:o,cell:e.currentTarget})}),k){let{rowspan:e=1,colspan:t=1}=k(ee)||{};if(!e||!t)return null;g={rowspan:e,colspan:t}}return!X&&M&&M.showStatus&&(m=l.hasRowChange(s,d.property)),X||i||(B&&(ae(U,A.rows,A.columns,s,d),ae(J,A.tRows,A.tColumns,s,d)),V&&ae(Q,j.rows,j.columns,s,d)),e("td",{class:["vxe-body--column",d.id,{[`col--${D}`]:D,"col--edit":O,"col--checked":U.active,"col--checked-top":U.top,"col--checked-bottom":U.bottom,"col--checked-left":U.left,"col--checked-right":U.right,"col--checked-temp":J.active,"col--checked-temp-top":J.top,"col--checked-temp-bottom":J.bottom,"col--checked-temp-left":J.left,"col--checked-temp-right":J.right,"col--selected":N&&O&&F.row===s&&F.column===d,"col--copyed":Q.active,"col--copyed-top":Q.top,"col--copyed-bottom":Q.bottom,"col--copyed-left":Q.left,"col--copyed-right":Q.right,"col--actived":O&&W.row===s&&W.column===d,"col--dirty":m,"col--valid-error":z.row===s&&z.column===d,"edit--visible":O&&"visible"===O.type,"fixed--hidden":X},$?n.a.isFunction($)?$(ee):$:""],key:H||h,attrs:g,on:G},y&&X?[]:[e("div",{class:["vxe-cell",{"c--title":Y,"c--tooltip":_,"c--ellipsis":q}],attrs:{title:Y?p.getCellLabel(s,d,ee):null},style:{width:K?`${C?L-1:L}px`:null}},d.renderCell(e,ee)),B&&!i?e("span",{class:"vxe-body--column-checked-lt"}):null,B&&!i?e("span",{class:"vxe-body--column-checked-rb"}):null,V&&!i?e("span",{class:"vxe-body--column-copyed-lt"}):null,V&&!i?e("span",{class:"vxe-body--column-copyed-rb"}):null,U.bottom&&U.right?e("span",{class:"vxe-body--column-checked-corner",on:{mousedown(e){l.triggerCornerMousedownEvent({$table:l,seq:r,row:s,rowIndex:a,$rowIndex:c,column:d,columnIndex:h,$columnIndex:u,fixed:i,level:o,cell:e.target.parentNode},e)}}}):null])}function de(e,t,l,r,i,o,s){let{highlightHoverRow:a,rowClassName:c,selectRow:d,hoverRow:h,treeConfig:u,treeExpandeds:g,scrollYLoad:m,overflowX:f,columnStore:x,scrollYStore:v,editStore:b,expandeds:w,getRowMapIndex:C,getColumnMapIndex:S}=l,{leftList:y,rightList:$}=x,k=[];return o.forEach((o,x)=>{let E={},T=x,I=T+1;m&&(I+=v.startIndex),T=C(o),a&&(y.length||$.length)&&f&&(E.mouseenter=e=>{o!==h&&l.triggerHoverEvent(e,{row:o,rowIndex:T})});let M=p.getRowId(l,o,T);if(k.push(e("tr",{class:["vxe-body--row",{[`row--level-${r}`]:u,"row--selected":o===d,"row--hover":o===h,"row--new":b.insertList.indexOf(o)>-1},c?n.a.isFunction(c)?c({$table:l,seq:I,row:o,rowIndex:T}):c:""],attrs:{"data-rowkey":M},key:M,on:E},s.map((n,s)=>{let a=S(n);return ce(e,t,l,I,i,r,o,T,x,n,a,s)}))),u&&g.length){let n=o[u.children];n&&n.length&&g.indexOf(o)>-1&&k.push.apply(k,de(e,t,l,r+1,i,n,s))}else if(w.length&&w.indexOf(o)>-1){let t=s.find(e=>"expand"===e.type),n=S(t);t&&k.push(e("tr",{class:["vxe-body--expanded-row"],key:`expand_${T}`,on:E},[e("td",{class:["vxe-body--expanded-column"],attrs:{colspan:s.length}},[e("div",{class:["vxe-body--expanded-cell"]},[t.renderData(e,{$table:l,seq:I,row:o,rowIndex:T,column:t,columnIndex:n,fixed:i,level:r})])])]))}}),k}function he(e,t,l){(t||l)&&(t&&(t.onscroll=null,t.scrollTop=e),l&&(l.onscroll=null,l.scrollTop=e),clearTimeout(ne),ne=setTimeout(function(){t&&(t.onscroll=t._onscroll),l&&(l.onscroll=l._onscroll)},100))}var ue={name:"VxeTableBody",props:{tableData:Array,tableColumn:Array,visibleColumn:Array,collectColumn:Array,fixedColumn:Array,size:String,fixedType:String,isGroup:Boolean},mounted(){this.$el.onscroll=this.scrollEvent,this.$el._onscroll=this.scrollEvent},beforeDestroy(){this.$el._onscroll=null,this.$el.onscroll=null},render(e){let{$parent:t,fixedColumn:l,fixedType:r}=this,{maxHeight:i,height:o,containerHeight:a,loading:c,tableData:d,tableColumn:h,headerHeight:u,showFooter:p,showAllOverflow:g,footerHeight:m,tableHeight:f,tableWidth:x,scrollXStore:v,scrollXLoad:b,scrollYStore:w,scrollYLoad:C,scrollXHeight:S}=t,y="auto"===o?a:n.a.toNumber(o),$={};return y>0?$.height=`${r?(y>0?y-u-m:f)-(p?0:S):y-u-m}px`:i&&(i=n.a.toNumber(i),$["max-height"]=`${r?i-u-(p?0:S):i-u}px`),r&&g?(h=l,x=h.reduce((e,t)=>e+t.renderWidth,0)):b&&(r&&(h=l),x=h.reduce((e,t)=>e+t.renderWidth,0)),e("div",{class:["vxe-table--body-wrapper",r?`fixed--${r}-wrapper`:"body--wrapper"],attrs:{fixed:r},style:$},[C?e("div",{class:["vxe-body--top-space"],style:{height:`${w.topSpaceHeight}px`}}):null,!r&&b?e("div",{class:["vxe-body--x-space"],style:{width:`${t.tableWidth}px`}}):null,e("table",{class:["vxe-table--body"],attrs:{cellspacing:0,cellpadding:0,border:0},style:{width:null===x?x:`${x}px`,"margin-left":r?null:`${v.leftSpaceWidth}px`}},[e("colgroup",h.map((t,l)=>{return e("col",{attrs:{name:t.id,width:t.renderWidth},key:l})})),e("tbody",de(e,this,t,0,r,d,h))]),r||c||d.length?null:e("div",{class:"vxe-table--empty-block"},[e("span",{class:"vxe-table--empty-text"},t.$slots.empty||s.i18n("vxe.table.emptyText"))]),C?e("div",{class:["vxe-body--bottom-space"],style:{height:`${w.bottomSpaceHeight}px`}}):null])},methods:{scrollEvent(e){let{$parent:t,fixedType:l}=this,{$refs:r,scrollXLoad:i,scrollYLoad:n,triggerScrollXEvent:o,triggerScrollYEvent:s}=t,{tableHeader:a,tableBody:c,leftBody:d,rightBody:h}=r,u=a?a.$el:null,g=c.$el,m=d?d.$el:null,f=h?h.$el:null,x=g.scrollTop,b=g.scrollLeft;m&&"left"===l?(x=m.scrollTop,he(x,g,f)):f&&"right"===l?(x=f.scrollTop,he(x,g,m)):(u&&(u.scrollLeft=g.scrollLeft),(m||f)&&(clearTimeout(oe),oe=setTimeout(t.checkScrolling,v.browse.msie?200:20),he(x,m,f))),i&&o(e),n&&s(e),p.emitEvent(t,"body-scroll",[{fixed:l,scrollTop:x,scrollLeft:b},e])}},install:function(e){e.component(ue.name,ue)}};const pe=ue;var ge=ue,me={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},render(e){let{$parent:t,fixedType:l,fixedColumn:r,tableColumn:i,footerData:o}=this,{$listeners:s,footerRowClassName:a,footerCellClassName:c,tableWidth:d,scrollYWidth:h,scrollXHeight:u,scrollXLoad:g,scrollXStore:m,optimizeOpts:f,getColumnMapIndex:x}=t,{overflow:v}=f;return l&&v?(i=r,d=i.reduce((e,t)=>e+t.renderWidth,0)):g&&(l&&(i=r),d=i.reduce((e,t)=>e+t.renderWidth,0)),e("div",{class:["vxe-table--footer-wrapper",l?`fixed--${l}-wrapper`:"footer--wrapper"],style:{"margin-top":`${-u-1}px`},on:{scroll:this.scrollEvent}},[!l&&g?e("div",{class:["vxe-body--x-space"],style:{width:`${t.tableWidth}px`}}):null,e("table",{attrs:{cellspacing:0,cellpadding:0,border:0},style:{width:null===d?d:`${d+h}px`,"margin-left":l?null:`${m.leftSpaceWidth}px`}},[e("colgroup",i.map((t,l)=>{return e("col",{attrs:{name:t.id,width:t.renderWidth}})}).concat([e("col",{attrs:{width:h}})])),e("tfoot",o.map((r,o)=>{return e("tr",{class:["vxe-footer--row",a?n.a.isFunction(a)?a({$rowIndex:o,fixed:l}):a:""]},i.map((a,d)=>{let h=a.children&&a.children.length,u=l&&a.fixed!==l&&!h,g={},m=x(a);return s["header-cell-click"]&&(g.click=e=>{p.emitEvent(t,"header-cell-click",[{$table:t,$rowIndex:o,column:a,columnIndex:m,$columnIndex:d,fixed:l,cell:e.currentTarget},e])}),s["header-cell-dblclick"]&&(g.dblclick=e=>{p.emitEvent(t,"header-cell-dblclick",[{$table:t,$rowIndex:o,column:a,columnIndex:m,$columnIndex:d,fixed:l,cell:e.currentTarget},e])}),e("td",{class:["vxe-footer--column",a.id,{[`col--${a.headerAlign}`]:a.headerAlign,"fixed--hidden":u,"filter--active":a.filters.some(e=>e.checked)},c?n.a.isFunction(c)?c({$rowIndex:o,column:a,columnIndex:m,$columnIndex:d,fixed:l}):c:""],on:g,key:m},[e("div",{class:["vxe-cell"]},r["right"===l?r.length-i.length+m:m])])}).concat([e("td",{class:["col--gutter"],style:{width:`${h}px`}})]))}))])])},methods:{scrollEvent(e){let{$parent:t,fixedType:l}=this,{$refs:r,scrollXLoad:i,triggerScrollXEvent:n}=t,o=r.tableHeader,s=o?o.$el:null,a=r.tableBody.$el,c=r.tableFooter.$el,d=c.scrollLeft;s&&(s.scrollLeft=d),a&&(a.scrollLeft=d),i&&n(e),p.emitEvent(t,"footer-scroll",[{fixed:l,scrollLeft:d},e])}},install:function(e){e.component(me.name,me)}};const fe=me;var xe=me,ve={name:"VxeTableFilter",props:{filterStore:Object,optimizeOpts:Object},render(e){let t=this.$parent,{filterStore:l,optimizeOpts:r,filterCheckAllEvent:i,filterOptionRadioEvent:n,filterOptionCheckEvent:o}=this,{multiple:a}=l,c=[e("li",{class:["vxe-table--filter-option",{"is--active":!l.options.some(e=>e.checked)}]},[a?e("label",{class:["vxe-checkbox",{"is--indeterminate":l.isIndeterminate}]},[e("input",{attrs:{type:"checkbox"},domProps:{checked:l.isAllSelected},on:{change(e){i(e,e.target.checked)}}}),e("span",{class:["checkbox--icon"]}),e("span",{class:["checkbox--label"]},s.i18n("vxe.table.allFilter"))]):e("span",{class:"vxe-table--filter-label",on:{click:t.resetFilterEvent}},s.i18n("vxe.table.allFilter"))])];return l.options.forEach((t,l)=>{c.push(e("li",{class:["vxe-table--filter-option",{"is--active":t.checked}],key:l},[a?e("label",{class:"vxe-checkbox"},[e("input",{attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change(e){o(e,e.target.checked,t)}}}),e("span",{class:["checkbox--icon"]}),e("span",{class:["checkbox--label"]},t.label)]):e("span",{class:"vxe-table--filter-label",on:{click(e){n(e,!t.checked,t)}}},t.label)]))}),e("div",{class:["vxe-table--filter-wrapper",{"t--animat":r.animat,"filter--active":l.visible}],style:l.style},l.visible?[e("ul",{class:["vxe-table--filter-body"]},c),a?e("div",{class:["vxe-table--filter-footer"]},[e("button",{class:{"is--disabled":!l.isAllSelected&&!l.isIndeterminate},attrs:{disabled:!l.isAllSelected&&!l.isIndeterminate},on:{click:t.confirmFilterEvent}},s.i18n("vxe.table.confirmFilter")),e("button",{on:{click:t.resetFilterEvent}},s.i18n("vxe.table.resetFilter"))]):null]:[])},methods:{filterCheckAllEvent(e,t){let l=this.filterStore;l.options.forEach(e=>{e.checked=t}),l.isAllSelected=t,l.isIndeterminate=!1},filterOptionCheckEvent(e,t,l){l.checked=t,this.checkOptions()},filterOptionRadioEvent(e,t,l){this.filterStore.options.forEach(e=>{e.checked=!1}),l.checked=t,this.checkOptions(),this.$parent.confirmFilterEvent()},checkOptions(){let{filterStore:e}=this;e.isAllSelected=e.options.every(e=>e.checked),e.isIndeterminate=!e.isAllSelected&&e.options.some(e=>e.checked)}},install:function(e){e.component(ve.name,ve)}};const be=ve;var we=ve,Ce={name:"VxeTableLoading",props:{visible:Boolean},render(e){return e("div",{class:["vxe-table--loading"],style:{display:this.visible?"block":"none"}},[e("div",{class:"vxe-table--spinner"})])},install:function(e){e.component(Ce.name,Ce)}};const Se=Ce;var ye=Ce,$e=["loadData","reloadData","loadColumn","reloadColumn","reloadCustoms","reload","insert","insertAt","revert","remove","removeSelecteds","getRecords","getRowIndex","getColumns","getColumnIndex","getAllRecords","getInsertRecords","getRemoveRecords","getUpdateRecords","getSelectRecords","hasRowChange","setActiveRow","setActiveCell","setSelectCell","setRowExpansion","setAllRowExpansion","setTreeExpansion","setAllTreeExpansion","setCurrentRow","setSelection","setAllSelection","toggleRowSelection","toggleAllSelection","toggleRowExpansion","toggleTreeExpansion","clearCurrentRow","clearSelection","clearRowExpand","clearTreeExpand","clearSort","clearFilter","clearChecked","clearSelected","clearActivedd","clearCopyed","clearData","clearScroll","clearAll","closeFilter","clostTooltip","closeContextMenu","recalculate","refreshColumn","updateStatus","isScrollXLoad","isScrollYLoad","sort","validate","exportCsv"];const ke={},Ee=Object.keys(a);$e.forEach(e=>{ke[e]=function(){return this.$refs.xTable[e].apply(this.$refs.xTable[e],arguments)}});var Te={name:"VxeGrid",props:{columns:Array,pagerConfig:Object,proxyConfig:Object,toolbar:Object,...a},provide(){return{$grid:this}},data(){return{tableLoading:!1,tableData:[],tableCustoms:[],pendingRecords:[],filterData:{},sortData:{prop:"",order:""},tablePage:{total:0,pageSize:10,currentPage:1}}},computed:{vSize(){return this.size||this.$parent.size||this.$parent.vSize},isAlert(){return this.proxyConfig&&!1!==this.proxyConfig.message},tableProps(){let e={};return Ee.forEach(t=>{e[t]=this[t]}),e}},watch:{columns(e){this.loadColumn(e)}},created(){let{customs:e,pagerConfig:t}=this;e&&(this.tableCustoms=e),t&&t.pageSize&&(this.tablePage.pageSize=t.pageSize)},mounted(){let{columns:e,proxyConfig:t}=this;e&&e.length&&this.loadColumn(this.columns),t&&!1!==t.autoLoad&&this.commitProxy("query")},render(e){let{$slots:t,$listeners:l,pagerConfig:r,vSize:i,loading:n,toolbar:o,editConfig:a,proxyConfig:c,tableProps:d,tableLoading:h,tablePage:u,tableData:p,tableCustoms:g,optimization:m}=this,f=Object.assign({},d,{optimization:Object.assign({},s.optimization,m)}),x=Object.assign({},l);return c&&(Object.assign(f,{loading:n||h,data:p,rowClassName:this.handleRowClassName}),c.index&&r&&(f.startIndex=(u.currentPage-1)*u.pageSize),c.sort&&(x["sort-change"]=this.sortChangeEvent),c.filter&&(x["filter-change"]=this.filterChangeEvent)),o&&(o.setting&&o.setting.storage||(f.customs=g),x["update:customs"]=e=>{this.tableCustoms=e}),a&&(f.editConfig=Object.assign({},a,{activeMethod:this.handleActiveMethod})),e("div",{class:["vxe-grid",{[`size--${i}`]:i,"t--animat":f.optimization.animat}]},[o?e("vxe-toolbar",{ref:"toolbar",props:o}):null,e("vxe-table",{props:f,on:x,ref:"xTable"},t.default),r?e("vxe-pager",{props:Object.assign({size:i,loading:n||h},r,c?u:{}),on:{"current-change":this.currentChangeEvent,"size-change":this.sizeChangeEvent}}):null])},methods:{...ke,handleRowClassName({row:e}){return this.pendingRecords.some(t=>t===e)?"row--pending":""},handleActiveMethod({row:e}){return-1===this.pendingRecords.indexOf(e)},commitProxy(e){let{proxyConfig:t={},tablePage:l,pagerConfig:r,sortData:i,filterData:o,isAlert:a}=this,{ajax:c,props:d={}}=t;if(c)switch(e){case"reload":case"query":if(c.query){let t={sort:i,filter:o};return this.tableLoading=!0,r&&(t.page=l),"reload"===e&&(r&&(l.currentPage=1),this.pendingRecords=[]),c.query(t).then(e=>{e?r?(l.total=n.a.get(e,d.total||"page.total"),this.tableData=n.a.get(e,d.data||"result")):this.tableData=d.data?n.a.get(e,d.data):e:this.tableData=[],this.tableLoading=!1}).catch(e=>{this.tableLoading=!1})}break;case"delete":if(c.delete){let e=this.getSelectRecords();this.remove(e).then(()=>{let t=this.getRemoveRecords(),l={removeRecords:t};if(t.length)return this.tableLoading=!0,c.delete({body:l}).then(e=>{this.tableLoading=!1}).catch(e=>{this.tableLoading=!1}).then(()=>this.commitProxy("reload"));a&&!e.length&&this.$XMsg.alert(s.i18n("vxe.grid.selectOneRecord")).catch(e=>e)})}break;case"save":if(c.save){let e=Object.assign({pendingRecords:this.pendingRecords},this.getAllRecords()),{insertRecords:t,removeRecords:l,updateRecords:r,pendingRecords:i}=e;return t.length&&(e.pendingRecords=i.filter(e=>-1===t.indexOf(e))),i.length&&(e.insertRecords=t.filter(e=>-1===i.indexOf(e))),new Promise(t=>{this.validate(e.insertRecords.concat(r),n=>{n?e.insertRecords.length||l.length||r.length||e.pendingRecords.length?(this.tableLoading=!0,t(c.save({body:e}).then(()=>{this.tableLoading=!1}).catch(e=>{this.tableLoading=!1}).then(()=>this.commitProxy("reload")))):(a&&(i.length?this.remove(i):this.$XMsg.alert(s.i18n("vxe.grid.dataUnchanged")).catch(e=>e)),t()):t(n)})})}break}return this.$nextTick()},getPendingRecords(){return this.pendingRecords},triggerPendingEvent(e){let{pendingRecords:t,isAlert:l}=this,r=this.getSelectRecords();if(r.length){let e=[],l=[];r.forEach(r=>{t.some(e=>r===e)?l.push(r):e.push(r)}),l.length?this.pendingRecords=t.filter(e=>-1===l.indexOf(e)).concat(e):e.length&&(this.pendingRecords=t.concat(e)),this.clearSelection()}else l&&this.$XMsg.alert(s.i18n("vxe.grid.selectOneRecord")).catch(e=>e)},currentChangeEvent(e){this.tablePage.currentPage=e,this.commitProxy("query"),p.emitEvent(this,"current-page-change",[e])},sizeChangeEvent(e){this.tablePage.currentPage=1,this.tablePage.pageSize=e,this.commitProxy("reload"),p.emitEvent(this,"page-size-change",[e])},sortChangeEvent({column:e,prop:t,order:l}){let{sortData:r}=this;e.remoteSort?(r.prop=t,r.order=l,this.commitProxy("query")):p.emitEvent(this,"sort-change",[e,t,l])},filterChangeEvent({column:e,prop:t,values:l}){e.remoteFilter?(this.filterData[t]=l,this.commitProxy("reload")):p.emitEvent(this,"filter-change",[e,t,l])}},install:function(e){e.component(Te.name,Te)}};const Ie=Te;var Me=Te;const Re={header:{options:[[{code:"exportAll",name:""},{code:"exportAll",name:""}]]},body:{options:[[{code:"clip",name:""},{code:"copy",name:""},{code:"paste",name:""}],[{code:"insert",name:""},{code:"remove",name:""},{code:"clearData",name:""}],[{code:"sort",name:"",children:[{code:"clearSort",name:""},{code:"sortAsc",name:""},{code:"sortDesc",name:""}]}],[{code:"exportAll",name:".csv"}]]}},ze={},Oe={trigger:"dblclick",mode:"cell",showIcon:!1,showStatus:!1};function De(e,t){return t?t.map(t=>e("vxe-table-column",{props:t},De(e,t.children))):[]}function Pe(e,t,l={}){let{editConfig:r,contextMenu:i}=l;return Object.assign({},l,{border:!0,resizable:!0,showAllOverflow:null,headerCellClassName:t.handleHeaderCellClassName,cellClassName:t.handleCellClassName,contextMenu:Object.assign({},i,Re),mouseConfig:{selected:!0,checked:!0},keyboardConfig:{isArrow:!0,isDel:!0,isTab:!0,isCut:!0,isEdit:!0},editConfig:r?Object.assign({},Oe,r):Oe})}$e.forEach(e=>{ze[e]=function(){return this.$refs.xTable[e].apply(this.$refs.xTable[e],arguments)}});var Le={name:"VxeExcel",props:{columns:Array,...a},data(){return{excelStore:{uploadRows:[]}}},render(e){return e("vxe-table",{class:"vxe-excel",props:Pe(e,this,this.$props),on:{...this.$listeners,"cell-click":this.cellClickEvent,"header-cell-click":this.headerCellClickEvent,"context-menu-click":this.contextMenuClickEvent},ref:"xTable"},De(e,this.columns))},methods:{...ze,handleHeaderCellClassName({column:e,columnIndex:t,$table:l}){let{editStore:r}=l,{selected:i,actived:n}=r;if(t>0&&(i.column===e||n.column===e))return"vxe-excel--column-selected"},handleCellClassName({row:e,column:t,columnIndex:l,$table:r}){let{editStore:i}=r,{selected:n,actived:o}=i;if(0===l&&(n.row===e||o.row===e))return"vxe-excel--index-selected"},cellClickEvent({row:e,rowIndex:t,columnIndex:l,$table:r},i){let{$refs:n,visibleColumn:o,handleSelected:s,handleChecked:a}=r;if(0===l){l+=1;let c=n.tableBody.$el,d=o[l],h=c.querySelectorAll(".vxe-body--row"),u=h[t],p=u.querySelector(`.${d.id}`);s({row:e,rowIndex:t,column:d,columnIndex:l,cell:p,$table:r},i).then(()=>{a({rowIndex:t,columnIndex:l},{rowIndex:t,columnIndex:o.length-1},i)})}},headerCellClickEvent({column:e,columnIndex:t,$table:l},r){let{$refs:i,tableData:n,handleSelected:o,handleChecked:s}=l;if(n.length){let a=i.tableBody.$el,c=0,d=n[c],h=a.querySelectorAll(".vxe-body--row"),u=h[c],p=u.querySelector(`.${e.id}`);o({row:d,rowIndex:c,column:e,columnIndex:t,cell:p,$table:l},r).then(()=>{s({rowIndex:c,columnIndex:t},{rowIndex:n.length-1,columnIndex:t},r)})}},contextMenuClickEvent({menu:e,row:t,column:l},r){let i=this.$refs.xTable,{property:n}=l;switch(e.code){case"clip":i.handleCopyed(!0,r);break;case"copy":i.handleCopyed(!1,r);break;case"paste":i.handlePaste(r);break;case"insert":i.insertAt({},t);break;case"remove":i.remove(t);break;case"clearData":i.clearData(t,n);break;case"clearFilter":i.clearFilter();break;case"clearSort":i.clearSort();break;case"sortAsc":i.sort(n,"asc");break;case"sortDesc":i.sort(n,"desc");break;case"exportAll":i.exportCsv({isHeader:!1});break}}},install:function(e){e.component(Le.name,Le)}};const He=Le;var Ae=Le,Fe={name:"VxeTableContextMenu",props:{ctxMenuStore:Object},render(e){let t=this.$parent,{_e:l,ctxMenuStore:r}=this;return e("div",{class:["vxe-table--ctxmenu-wrapper",{show:r.visible}],style:r.style},r.list.map((i,n)=>{return e("ul",{class:["vxe-ctxmenu--option-wrapper"],key:n},i.map((i,o)=>{let s=i.children&&i.children.length;return e("li",{class:[{"link--disabled":i.disabled,"link--active":i===r.selected}],key:`${n}_${o}`},[e("a",{class:["vxe-ctxmenu--link"],on:{click(e){t.ctxMenuLinkEvent(e,i)},mouseover(e){t.ctxMenuMouseoverEvent(e,i)},mouseout(e){t.ctxMenuMouseoutEvent(e,i)}}},[e("i",{class:["vxe-ctxmenu--link-prefix",i.prefixIcon]}),e("span",{class:["vxe-ctxmenu--link-content"]},i.name),e("i",{class:["vxe-ctxmenu--link-suffix",s?i.suffixIcon||"suffix--haschild":i.suffixIcon]})]),s?e("ul",{class:["vxe-table--ctxmenu-clild-wrapper",{show:i===r.selected&&r.showChild}]},i.children.map((l,s)=>{return e("li",{class:[{"link--disabled":l.disabled,"link--active":l===r.selectChild}],key:`${n}_${o}_${s}`},[e("a",{class:["vxe-ctxmenu--link"],on:{click(e){t.ctxMenuLinkEvent(e,l)},mouseover(e){t.ctxMenuMouseoverEvent(e,i,l)},mouseout(e){t.ctxMenuMouseoutEvent(e,i,l)}}},[e("i",{class:["vxe-ctxmenu--link-prefix",l.prefixIcon]}),e("span",{class:["vxe-ctxmenu--link-content"]},l.name)])])})):l()])}))}))},install:function(e){e.component(Fe.name,Fe)}};const We=Fe;var je=Fe,Ne={name:"VxeToolbar",props:{id:String,setting:{type:[Boolean,Object],default:()=>s.toolbar.setting},buttons:{type:Array,default:()=>s.toolbar.buttons},size:String,data:Array,customs:Array},inject:{$grid:{default:null}},data(){return{tableCustoms:[],settingStore:{visible:!1}}},computed:{$table(){let{$parent:e,data:t}=this,{$children:l}=e,r=l.indexOf(this);return l.find((e,l)=>e&&e.refreshColumn&&l>r&&(t?e.data===t:"vxe-table"===e.$vnode.componentOptions.tag))},vSize(){return this.size||this.$parent.size||this.$parent.vSize},isStorage(){return this.setting&&this.setting.storage},storageKey(){return s.toolbar.storageKey||"VXE_TABLE_CUSTOM_HIDDEN"}},created(){let{isStorage:e,id:t,customs:l,setting:r}=this;if(l&&(this.tableCustoms=l),e&&!t)throw new Error("[vxe-table] Toolbar must have a unique primary id.");r&&this.$nextTick(()=>this.loadStorage()),T.on(this,"mousedown",this.handleGlobalMousedownEvent),T.on(this,"blur",this.handleGlobalBlurEvent)},destroyed(){T.off(this,"mousedown"),T.off(this,"blur")},render(e){let{$slots:t,settingStore:l,setting:r,buttons:i=[],vSize:o,tableCustoms:s}=this,a={},c={};return r&&("manual"===r.trigger||("hover"===r.trigger?(a.mouseenter=this.handleMouseenterSettingEvent,a.mouseleave=this.handleMouseleaveSettingEvent,c.mouseenter=this.handleWrapperMouseenterEvent,c.mouseleave=this.handleWrapperMouseleaveEvent):a.click=this.handleClickSettingEvent)),e("div",{class:["vxe-toolbar",{[`size--${o}`]:o}]},[e("div",{class:"vxe-button--wrapper"},t.buttons?t.buttons:i.map(t=>{return e("vxe-button",{on:{click:e=>this.btnEvent(t,e)}},n.a.isFunction(t.name)?t.name():t.name)})),r?e("div",{class:["vxe-custom--wrapper",{"is--active":l.visible}],ref:"customWrapper"},[e("div",{class:"vxe-custom--setting-btn",on:a},[e("i",{class:"vxe-icon--menu"})]),e("div",{class:"vxe-custom--option-wrapper"},[e("div",{class:"vxe-custom--option",on:c},s.map(t=>{return t.property&&t.label?e("vxe-checkbox",{props:{value:t.visible},on:{change:e=>{t.visible=e,r&&r.immediate&&this.updateSetting()}}},t.label):null}))])]):null])},methods:{openSetting(){this.settingStore.visible=!0},closeSetting(){let{setting:e,settingStore:t}=this;t.visible&&(t.visible=!1,e&&!e.immediate&&this.updateSetting())},loadStorage(){if(this.isStorage){let e=this.getStorageMap(),t=e[this.id];t?this.updateCustoms(t.split(",").map(e=>({prop:e,visible:!1}))):this.updateCustoms(this.tableCustoms)}else this.updateCustoms(this.tableCustoms)},updateCustoms(e){let{$grid:t,$table:l}=this,r=t||l;r&&r.reloadCustoms(e).then(e=>{this.tableCustoms=e})},getStorageMap(){let e=s.version,t=n.a.toStringJSON(localStorage.getItem(this.storageKey));return t&&t._v===e?t:{_v:e}},saveStorageMap(){let{id:e,tableCustoms:t,isStorage:l,storageKey:r}=this;if(l){let l=this.getStorageMap();l[e]=t.filter(e=>!e.visible).map(e=>e.property).join(",")||void 0,localStorage.setItem(r,n.a.toJSONString(l))}},updateSetting(){let{$grid:e,$table:t}=this;e?(e.refreshColumn(),this.saveStorageMap()):t?(t.refreshColumn(),this.saveStorageMap()):console.error("[vxe-toolbar] Not found vxe-table.")},handleGlobalMousedownEvent(e){v.getEventTargetNode(e,this.$refs.customWrapper).flag||this.closeSetting()},handleGlobalBlurEvent(e){this.closeSetting()},handleClickSettingEvent(e){let{settingStore:t}=this;t.visible=!t.visible},handleMouseenterSettingEvent(e){this.settingStore.activeBtn=!0,this.openSetting()},handleMouseleaveSettingEvent(e){let{settingStore:t}=this;t.activeBtn=!1,setTimeout(()=>{t.activeBtn||t.activeWrapper||this.closeSetting()},300)},handleWrapperMouseenterEvent(e){this.settingStore.activeWrapper=!0,this.openSetting()},handleWrapperMouseleaveEvent(e){let{settingStore:t}=this;t.activeWrapper=!1,setTimeout(()=>{t.activeBtn||t.activeWrapper||this.closeSetting()},300)},btnEvent(e,t){let{$grid:l}=this;if(l){switch(e.code){case"insert":l.insert();break;case"insert_actived":l.insert().then(({row:e})=>l.setActiveRow(e));break;case"mark_cancel":l.triggerPendingEvent(t);break;case"delete_selection":this.handleDeleteRow(l,"vxe.grid.deleteSelectRecord",()=>l.commitProxy("delete"));break;case"remove_selection":this.handleDeleteRow(l,"vxe.grid.removeSelectRecord",()=>l.removeSelecteds());break;case"save":l.commitProxy("save");break;case"reload":l.commitProxy("reload");break;case"export":l.exportCsv();break}p.emitEvent(l,"toolbar-button-click",[{button:e,$grid:l},t])}},handleDeleteRow(e,t,l){let r=e.getSelectRecords();e.isAlert?r.length?this.$XMsg.confirm(s.i18n(t)).then(l).catch(e=>e):this.$XMsg.alert(s.i18n("vxe.grid.selectOneRecord")).catch(e=>e):r.length&&l()}},install:function(e){e.component(Ne.name,Ne)}};const Be=Ne;var Ve=Ne,Xe={name:"VxePager",props:{size:String,layouts:{type:Array,default:()=>s.pager.layouts||["PrevJump","PrevPage","Jump","PageCount","NextPage","NextJump","Sizes","Total"]},currentPage:{type:Number,default:1},loading:Boolean,pageSize:{type:Number,default:()=>s.pager.pageSize||10},total:{type:Number,default:0},pagerCount:{type:Number,default:()=>s.pager.pagerCount||7},pageSizes:{type:Array,default:()=>s.pager.pageSizes||[10,15,20,50,100]},background:Boolean},inject:{$grid:{default:null}},data(){return{showSizes:!1,panelStyle:null}},computed:{vSize(){return this.size||this.$parent.size||this.$parent.vSize},isSizes(){return this.layouts.some(e=>"Sizes"===e)},pageCount(){return Math.max(Math.ceil(this.total/this.pageSize),1)},numList(){return Array.from(new Array(this.pageCount>this.pagerCount?this.pagerCount-2:this.pagerCount))},offsetNumber(){return Math.floor((this.pagerCount-2)/2)}},created(){T.on(this,"mousedown",this.handleGlobalMousedownEvent)},mounted(){let e=this.$refs.sizePanel;e&&document.body.appendChild(this.$refs.sizePanel)},beforeDestroy(){let e=this.$refs.sizePanel;e&&e.parentNode&&e.parentNode.removeChild(e)},destroyed(){T.off(this,"mousedown")},render(e){let{layouts:t,isSizes:l,loading:r,vSize:i,background:n}=this;return e("div",{class:["vxe-pager",{[`size--${i}`]:i,"p--background":n,"is--loading":r}]},t.map(t=>this[`render${t}`](e)).concat(l?this.renderSizePanel(e):[]))},methods:{renderPrevPage(e){let{currentPage:t}=this;return e("span",{class:["vxe-pager--prev-btn",{"is--disabled":t<=1}],on:{click:this.prevPageEvent}},[e("i",{class:["vxe-icon--page-icon",s.iconMap.prevPage]})])},renderPrevJump(e,t){let{numList:l,currentPage:r}=this;return e(t||"span",{class:["vxe-pager--jump-prev",{"is--fixed":!t,"is--disabled":r<=1}],on:{click:()=>this.jumpPageEvent(Math.max(r-l.length,1))}},[t?e("i",{class:"vxe-pager--jump-more vxe-icon--more"}):null,e("i",{class:["vxe-pager--jump-icon",s.iconMap.jumpPrev]})])},renderNumber(e){return e("ul",{class:"vxe-pager--btn-wrapper"},this.renderPageBtn(e))},renderJumpNumber(e){return e("ul",{class:"vxe-pager--btn-wrapper"},this.renderPageBtn(e,!0))},renderNextJump(e,t){let{numList:l,currentPage:r,pageCount:i}=this;return e(t||"span",{class:["vxe-pager--jump-next",{"is--fixed":!t,"is--disabled":r>=i}],on:{click:()=>this.jumpPageEvent(Math.min(r+l.length,i))}},[t?e("i",{class:"vxe-pager--jump-more vxe-icon--more"}):null,e("i",{class:["vxe-pager--jump-icon",s.iconMap.jumpNext]})])},renderNextPage(e){let{currentPage:t,pageCount:l}=this;return e("span",{class:["vxe-pager--next-btn",{"is--disabled":t>=l}],on:{click:this.nextPageEvent}},[e("i",{class:["vxe-icon--page-icon",s.iconMap.nextPage]})])},renderSizes(e){let{pageSize:t}=this;return e("span",{class:["vxe-pager--sizes",{"is--active":this.showSizes}],on:{click:this.toggleSizePanel},ref:"sizeBtn"},[e("i",{class:"vxe-pager--sizes-arrow vxe-icon--caret-bottom"}),e("span",{class:"size--content"},`${t}${s.i18n("vxe.pager.pagesize")}`)])},renderSizePanel(e){let{panelStyle:t,pageSize:l,pageSizes:r,showSizes:i}=this;return e("ul",{class:["vxe-pager-size--select",{"is--show":i}],style:t,ref:"sizePanel"},r.map(t=>{return e("li",{class:["size--option",{"is--active":t===l}],on:{click:()=>this.sizeChangeEvent(t)}},`${t}${s.i18n("vxe.pager.pagesize")}`)}))},renderFullJump(e){return this.renderJump(e,!0)},renderJump(e,t){let{currentPage:l,pageCount:r}=this;return e("span",{class:"vxe-pager--jump"},[t?e("span",{class:"vxe-pager--goto-text"},s.i18n("vxe.pager.goto")):null,e("input",{class:"vxe-pager--goto",domProps:{value:l},attrs:{type:"text",autocomplete:"off"},on:{keydown:e=>{if(13===e.keyCode){let t=n.a.toNumber(e.target.value),l=t<=0?1:t>=r?r:t;e.target.value=l,this.jumpPageEvent(l)}else 38===e.keyCode?(e.preventDefault(),this.nextPageEvent(e)):40===e.keyCode&&(e.preventDefault(),this.prevPageEvent(e))}}}),t?e("span",{class:"vxe-pager--classifier-text"},s.i18n("vxe.pager.pageClassifier")):null])},renderPageCount(e){let{pageCount:t}=this;return e("span",{class:"vxe-pager--count"},[e("span",{class:"vxe-pager--separator"},"/"),e("span",t)])},renderTotal(e){let{total:t}=this;return e("span",{class:"vxe-pager--total"},n.a.template(s.i18n("vxe.pager.total"),{total:t}))},renderPageBtn(e,t){let{numList:l,currentPage:r,pageCount:i,pagerCount:n,offsetNumber:o}=this,s=[],a=i>n,c=a&&r>o+1,d=a&&r<i-o,h=1;return a&&(h=r>=i-o?Math.max(i-l.length+1,1):Math.max(r-o,1)),t&&c&&s.push(e("li",{class:"vxe-pager--num-btn",on:{click:()=>this.jumpPageEvent(1)}},1),this.renderPrevJump(e,"li")),l.forEach((t,l)=>{let n=h+l;n<=i&&s.push(e("li",{class:["vxe-pager--num-btn",{"is--active":r===n}],on:{click:()=>this.jumpPageEvent(n)},key:n},n))}),t&&d&&s.push(this.renderNextJump(e,"li"),e("li",{class:"vxe-pager--num-btn",on:{click:()=>this.jumpPageEvent(i)}},i)),s},handleGlobalMousedownEvent(e){!this.showSizes||v.getEventTargetNode(e,this.$refs.sizeBtn).flag||v.getEventTargetNode(e,this.$refs.sizePanel).flag||this.hideSizePanel()},prevPageEvent(){let{currentPage:e}=this;e>1&&this.jumpPageEvent(Math.max(e-1,1))},nextPageEvent(){let{currentPage:e,pageCount:t}=this;e<t&&this.jumpPageEvent(Math.min(e+1,t))},jumpPageEvent(e){e!==this.currentPage&&(this.$emit("update:currentPage",e),p.emitEvent(this,"current-change",[e]))},sizeChangeEvent(e){e!==this.pageSize&&(this.$emit("update:pageSize",e),p.emitEvent(this,"size-change",[e])),this.hideSizePanel()},toggleSizePanel(){this.showSizes?this.hideSizePanel():this.showSizePanel()},hideSizePanel(){this.showSizes=!1},showSizePanel(){let{$refs:e}=this,t=e.sizeBtn,{left:l,top:r}=v.getOffsetPos(t),{scrollTop:i,scrollLeft:n,visibleWidth:o,visibleHeight:s}=v.getDomNode();this.panelStyle={left:`${l}px`,top:`${r+t.offsetHeight+6}px`},this.showSizes=!0,this.$nextTick().then(()=>{let i=e.sizePanel;if(i)return this.panelStyle={top:`${r+t.offsetHeight+6}px`,left:`${l+Math.floor((t.offsetWidth-i.offsetWidth)/2)}px`},this.$nextTick()}).then(()=>{let a=e.sizePanel;if(a){let e=a.offsetHeight,c=a.offsetWidth;r+t.offsetHeight+e>i+s&&(this.panelStyle.top=`${r-e-6}px`),l+c>n+o&&(this.panelStyle.left=`${n+o-c-6}px`)}})}},install:function(e){e.component(Xe.name,Xe)}};const qe=Xe;var Ye=Xe,_e={name:"VxeCheckbox",props:{value:Boolean,indeterminate:Boolean,disabled:Boolean,name:String,size:String},computed:{vSize(){return this.size||this.$parent.size||this.$parent.vSize}},render(e){let{disabled:t,vSize:l,indeterminate:r,value:i}=this;return e("label",{class:["vxe-checkbox",{[`size--${l}`]:l,"is--indeterminate":r,"is--disabled":t}]},[e("input",{attrs:{type:"checkbox",disabled:t},domProps:{checked:i},on:{change:e=>{if(!this.disabled){let t=e.target.checked;this.$emit("input",t),this.$emit("change",t,e)}}}}),e("span",{class:["checkbox--icon"]}),this.$slots.default?e("span",{class:"checkbox--label"},this.$slots.default):null])},install:function(e){e.component(_e.name,_e)}};const Ke=_e;var Ge=_e,Ue={name:"VxeRadio",props:{value:[String,Number],label:[String,Number],disabled:Boolean,name:String,size:String},computed:{vSize(){return this.size||this.$parent.size||this.$parent.vSize}},render(e){let{$slots:t,disabled:l,vSize:r,value:i,label:n,name:o}=this;return e("label",{class:["vxe-radio",{[`size--${r}`]:r,"is--disabled":l}]},[e("input",{attrs:{type:"radio",name:o,disabled:l},domProps:{checked:i===n},on:{change:e=>{l||(this.$emit("input",n),this.$emit("change",n,e))}}}),e("span",{class:["radio--icon"]}),t.default?e("span",{class:["radio--label"]},t.default):null])},install:function(e){e.component(Ue.name,Ue)}};const Je=Ue;var Qe=Ue,Ze={name:"VxeInput",props:{value:[String,Number],type:{type:String,default:"text"},disabled:Boolean,placeholder:String,size:String},computed:{vSize(){return this.size||this.$parent.size||this.$parent.vSize}},render(e){let{$listeners:t,value:l,type:r,vSize:i,placeholder:n,disabled:o}=this,s={input:e=>this.$emit("input",e.target.value)};return t.change&&(s.change=e=>this.$emit("change",e.target.value,e)),e("div",{class:["vxe-input--wrapper",{[`size--${i}`]:i,"is--disabled":this.disabled}]},[e("input",{class:"vxe-input",domProps:{value:l},attrs:{type:r,placeholder:n,disabled:o},on:s})])},install:function(e){e.component(Ze.name,Ze)}};const et=Ze;var tt=Ze,lt={name:"VxeButton",props:{type:String,size:String},computed:{vSize(){return this.size||this.$parent.size||this.$parent.vSize}},render(e){let{$listeners:t,type:l,vSize:r}=this,i=null;return t&&(i=n.a.objectMap(t,(e,t)=>e=>this.$emit(t,e))),e("text"===l?"a":"button",{class:["vxe-button",{[`size--${r}`]:r,[`type--${l}`]:l}],on:i},this.$slots.default)},install:function(e){e.component(lt.name,lt)}};const rt=lt;var it=lt,nt={name:"VxeMessageBox",props:{value:Boolean,type:String,title:{type:String,default:()=>s.i18n("vxe.alert.title")},message:String,lockView:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!1},animat:{type:Boolean,default:!0}},data(){return{visible:!1,contentVisible:!1,beforeLockStyle:null}},computed:{vSize(){return this.size||this.$parent&&(this.$parent.size||this.$parent.vSize)}},watch:{value(e){this[e?"open":"close"]()}},created(){this.value&&this.open()},mounted(){document.body.appendChild(this.$el)},beforeDestroy(){this.$el.parentNode.removeChild(this.$el)},render(e){let{vSize:t,type:l,animat:r,contentVisible:i,visible:n,title:o,message:a,lockView:c,mask:d}=this;return e("div",{class:["vxe-alert--wrapper",{[`size--${t}`]:t,"is--animat":r,"lock--view":c,"is--mask":d,"is--visible":i,active:n}],on:{click:this.selfClickEvent}},[e("div",{class:"vxe-alert--box"},[e("div",{class:"vxe-alert--header"},[e("span",{class:"vxe-alert--title"},o),e("i",{class:"vxe-alert--close-icon",on:{click:this.closeEvent}})]),e("div",{class:"vxe-alert--body"},[e("span",{class:"vxe-alert--content"},this.$slots.default||a)]),e("div",{class:"vxe-alert--footer"},["confirm"===l?e("vxe-button",{on:{click:this.cancelEvent}},s.i18n("vxe.button.cancel")):null,e("vxe-button",{props:{type:"primary"},on:{click:this.confirmEvent}},s.i18n("vxe.button.confirm"))])])])},methods:{selfClickEvent(e){if(this.maskClosable&&e.target===this.$el){let e="mask";this.close(e)}},closeEvent(e){let t="close";this.$emit(t,e),this.close(t)},confirmEvent(e){let t="confirm";this.$emit(t,e),this.close(t)},cancelEvent(e){let t="cancel";this.$emit(t,e),this.close(t)},open(){if(!this.visible){if(this.visible=!0,this.contentVisible=!1,setTimeout(()=>{this.contentVisible=!0},10),this.lockScroll){let e=document.body;this.beforeLockStyle={paddingRight:e.style.paddingRight,overflow:e.style.overflow},e.style.paddingRight=`${window.innerWidth-(document.documentElement.clientWidth||document.body.clientWidth)}px`,e.style.overflow="hidden"}this._handleCustom||(this.$emit("input",!0),this.$emit("show"))}},close(e){let{visible:t,lockScroll:l,beforeLockStyle:r}=this;t&&(this.contentVisible=!1,setTimeout(()=>{this.visible=!1,l&&Object.assign(document.body.style,r),this._handleCustom?this._handleCustom(e):(this.$emit("input",!1),this.$emit("hide",e))},200))}}},ot=null;function st(e){return new Promise((t,l)=>{let r=new ot({el:document.createElement("div"),propsData:e});r._handleCustom=function(e){r.$destroy(),"confirm"===e?t(e):l(e)},setTimeout(()=>r.open())})}["alert","confirm"].forEach(e=>{st[e]=function(t,l,r){let i={message:t,type:e};return"string"===typeof t?l&&(i.title=l):i=t,st(Object.assign({},i,r))}}),st.install=function(e){ot=e.extend(nt),e.prototype.$XMsg=st};var at=st,ct={name:"VxeTooltip",install:function(e){e.component(ct.name,ct)}};const dt=ct;var ht=ct,ut={vxe:{table:{emptyText:"",confirmFilter:"",resetFilter:"",allFilter:""},grid:{selectOneRecord:"",deleteSelectRecord:"",removeSelectRecord:"",dataUnchanged:" "},pager:{goto:"",pagesize:"/",total:" {{total}} ",pageClassifier:""},alert:{title:""},button:{confirm:"",cancel:""}}};l("1a97");const pt=[J,ee,se,ge,xe,we,ye,Me,Ae,je,Ve,Ye,Ge,Qe,tt,it,at,ht];function gt(e,t){n.a.isPlainObject(t)&&X.setup(t),pt.map(t=>e.use(t))}X.setup({i18n:(e,t)=>n.a.get(ut,e)}),"undefined"!==typeof window&&window.Vue&&gt(window.Vue),X.install=gt;var mt=X;l.d(t,"components",function(){return pt}),l.d(t,"Table",function(){return U}),l.d(t,"TableColumn",function(){return Z}),l.d(t,"TableHeader",function(){return ie}),l.d(t,"TableBody",function(){return pe}),l.d(t,"TableFooter",function(){return fe}),l.d(t,"TableFilter",function(){return be}),l.d(t,"TableLoading",function(){return Se}),l.d(t,"Grid",function(){return Ie}),l.d(t,"Excel",function(){return He}),l.d(t,"TableContextMenu",function(){return We}),l.d(t,"Toolbar",function(){return Be}),l.d(t,"Pager",function(){return qe}),l.d(t,"Checkbox",function(){return Ke}),l.d(t,"Radio",function(){return Je}),l.d(t,"Input",function(){return et}),l.d(t,"Button",function(){return rt}),l.d(t,"MessageBox",function(){return st}),l.d(t,"Tooltip",function(){return dt}),l.d(t,"VXETable",function(){return V}),l.d(t,"Interceptor",function(){return d}),l.d(t,"Renderer",function(){return H});t["default"]=mt}})["default"]});