"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Modal=exports.ModalController=void 0;var _ctor=_interopRequireDefault(require("xe-utils/ctor")),_modal=_interopRequireDefault(require("./src/modal")),_activities=_interopRequireDefault(require("./src/activities")),_vXETable=_interopRequireDefault(require("../v-x-e-table"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ModalClass=null;function openModal(e){var a=Object.assign({},e,{transfer:!0});return new Promise(function(t){if(a&&a.id&&_activities.default.some(function(e){return e.id===a.id}))t("exist");else{var o=a.events||{};a.events=Object.assign({},o,{hide:function(e){o.hide&&o.hide.call(this,e),setTimeout(function(){return l.$destroy()},l.isMsg?500:100),t(e.type)}});var l=new ModalClass({el:document.createElement("div"),propsData:a});setTimeout(function(){l.isDestroy?l.close():l.open()})}})}function closeModal(e){return(arguments.length?[getModal(e)]:_activities.default).forEach(function(e){e&&(e.isDestroy=!0,e.close("close"))}),Promise.resolve()}function getModal(t){return _ctor.default.find(_activities.default,function(e){return e.id===t})}var ModalController={get:getModal,close:closeModal,open:openModal};exports.ModalController=ModalController;var shortcutTypes=["alert","confirm","message"];shortcutTypes.forEach(function(a,r){var i=2===r?{mask:!1,lockView:!1,showHeader:!1}:{showFooter:!0};i.type=a,i.dblclickZoom=!1,1===r&&(i.status="question"),ModalController[a]=function(e,t,o){var l;return _ctor.default.isObject(e)?l=e:t&&(l=2===r?{status:t}:{title:t}),openModal(Object.assign({message:_ctor.default.toString(e),type:a},i,l,o))}}),_modal.default.install=function(e){_vXETable.default._modal=1,e.component(_modal.default.name,_modal.default),ModalClass=e.extend(_modal.default),_vXETable.default.modal=ModalController,e.prototype.$vxe?e.prototype.$vxe.modal=ModalController:e.prototype.$vxe={modal:ModalController}};var Modal=_modal.default;exports.Modal=Modal;var _default=_modal.default;exports.default=_default;